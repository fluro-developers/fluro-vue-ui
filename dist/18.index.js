(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{741:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("flex-column",[t.loading?[i("fluro-page-preloader",{attrs:{contain:""}})]:[i("tabset",{attrs:{justified:!0,vertical:!0}},[i("tab",{attrs:{heading:"Details"}},[i("flex-column-body",{staticStyle:{background:"#fafafa"}},[i("v-container",{attrs:{fluid:"","grid-list-lg":""}},[i("constrain",{attrs:{sm:""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",sm12:""}},[i("fluro-content-form-field",{attrs:{"form-fields":t.formFields,outline:t.showOutline,options:t.options,field:t.fieldHash.title},on:{input:t.update},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1),t._v(" "),t.model._id?t._e():i("v-flex",{attrs:{xs12:"",sm12:""}},[i("fluro-content-form-field",{attrs:{"form-fields":t.formFields,outline:t.showOutline,options:t.options,field:t.fieldHash.items},on:{input:t.update},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1),t._v(" "),i("v-flex",{attrs:{xs12:"",sm6:""}},[i("fluro-content-form-field",{attrs:{"form-fields":t.formFields,outline:t.showOutline,options:t.options,field:t.fieldHash.emails},on:{input:t.update},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1),t._v(" "),i("v-flex",{attrs:{xs12:"",sm6:""}},[i("fluro-content-form-field",{attrs:{"form-fields":t.formFields,outline:t.showOutline,options:t.options,field:t.fieldHash.phoneNumbers},on:{input:t.update},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1),t._v(" "),i("v-flex",{attrs:{xs12:"",sm12:""}},[i("fluro-panel",[i("fluro-panel-title",[t._v("\n                                               Home Address\n                                           ")]),t._v(" "),i("fluro-panel-body",[i("address-manager",{model:{value:t.model.address,callback:function(e){t.$set(t.model,"address",e)},expression:"model.address"}})],1)],1)],1),t._v(" "),i("v-flex",[i("fluro-panel",[i("fluro-panel-title",[i("div",{staticClass:"no-border-no-background",on:{click:function(e){return t.toggleSamePostal()}}},[i("fluro-toggle-item",{attrs:{inactive:!t.model.samePostal}},[t._v("Different Postal Address")])],1)]),t._v(" "),t.model.samePostal?i("fluro-panel-body",[i("address-manager",{model:{value:t.model.postalAddress,callback:function(e){t.$set(t.model,"postalAddress",e)},expression:"model.postalAddress"}})],1):t._e()],1)],1)],1)],1)],1)],1)],1),t._v(" "),t.model._id?i("tab",{attrs:{heading:t.membersLength+" Members"}},[i("flex-column-body",{staticStyle:{background:"#fafafa"}},[i("v-container",{attrs:{fluid:"","grid-list-lg":""}},[i("v-layout",{staticStyle:{"overflow-x":"scroll"},attrs:{row:"",wrap:"","justify-space-around":"","fill-height":""}},[t._l(t.members,(function(e,n){return i("div",{staticClass:"cards border"},[i("family-member-card",{attrs:{contactDefinitions:t.contactDefinitionOptions},model:{value:t.members[n],callback:function(e){t.$set(t.members,n,e)},expression:"members[index]"}})],1)})),t._v(" "),i("div",{staticClass:"ghost-card",on:{click:t.create}},[i("div",{staticClass:"add-contact ghost"},[i("div",{staticClass:"add-circle"},[i("fluro-icon",{staticClass:"add-icon",attrs:{icon:"plus"}})],1),t._v(" "),i("h5",{staticClass:"add-contact-text"},[t._v("Add Contact")])])])],2)],1)],1)],1):t._e(),t._v(" "),t.definition&&t.definition.fields&&t.definition.fields.length?i("tab",{attrs:{heading:t.definition.title+" Information"}},[i("fluro-content-form",{attrs:{options:t.options,fields:t.definition.fields},model:{value:t.model.data,callback:function(e){t.$set(t.model,"data",e)},expression:"model.data"}})],1):t._e()],1)]],2)};n._withStripped=!0;var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.model?i("v-container",{staticClass:"card",class:t.model.status,attrs:{fluid:"","grid-lines-sm":""}},[i("fluro-content-form",{attrs:{fields:t.fields},on:{input:t.save},scopedSlots:t._u([{key:"form",fn:function(e){var n=e.formFields,o=e.fieldHash,l=e.model,s=e.update,a=e.options;return[i("v-layout",{attrs:{column:""}},[i("v-flex",{staticClass:"avatar-flex"},[i("fluro-avatar",{staticClass:"avatar-icon",attrs:{id:l._id,type:"contact"}})],1),t._v(" "),i("v-flex",{staticClass:"text-centered less-padding"},[i("h4",[t._v(t._s(t.contactName))])]),t._v(" "),i("v-flex",{staticClass:"less-padding status-flex"},[i("fluro-status-select",{model:{value:l.status,callback:function(e){t.$set(l,"status",e)},expression:"model.status"}})],1),t._v(" "),i("v-flex",{staticClass:"text-centered less-padding"},[i("p",{staticClass:"muted",staticStyle:{"margin-bottom":"0px"}},[t._v(t._s(t.contactGender)+" "+t._s(t.contactAge))])]),t._v(" "),i("v-flex",{staticClass:"less-padding"},[i("fluro-content-form-field",{attrs:{"form-fields":n,options:a,field:o.householdRole},on:{input:s},model:{value:l,callback:function(t){l=t},expression:"model"}})],1),t._v(" "),i("v-flex",{staticClass:"less-padding"},[i("fluro-content-form-field",{attrs:{"form-fields":n,options:a,field:o.definition},on:{input:s},model:{value:l,callback:function(t){l=t},expression:"model"}})],1)],1),t._v(" "),i("v-layout",{attrs:{"align-center":""}},[i("v-flex",[i("v-btn",{attrs:{block:""},on:{click:function(e){return t.editContact()}}},[t._v("\n                        Edit\n                    ")])],1),t._v(" "),i("v-spacer"),t._v(" "),i("v-flex",[i("v-btn",{attrs:{block:""},on:{click:function(e){return t.viewContact()}}},[t._v("\n                        View\n                    ")])],1)],1)]}}],null,!1,1214556567),model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1):t._e()};o._withStripped=!0;var l=i(26),s=i(36),a=i(156),r=i(121),d={props:{value:{type:Object,default:{}},contactDefinitions:{type:Array}},components:{FluroContentForm:l.default,FluroContentFormField:s.default,FluroStatusSelect:a.a,FluroAvatar:r.default},data:function(){return{model:this.value}},created:function(){this.model.definition||(this.model.definition=""),this.model.householdRole||(this.model.householdRole="")},watch:{contactStatus:function(){this.save()}},methods:{editContact:function(){var t=this;t.$fluro.global.edit(t.model,!0).then((function(e){_.assign(t.model,e),console.log("Update")}))},viewContact:function(){this.$fluro.global.view(this.model,!0)},save:_.debounce((function(){console.log("TRIGGER UPDATE");var t=this,e={householdRole:t.model.householdRole,definition:t.model.definition,status:t.model.status};t.$fluro.api.put("content/contact/".concat(t.model._id),e).then((function(e){t.$fluro.notify("".concat(t.model.title," was successfully updated!"))})).catch((function(e){t.$fluro.error(e)}))}),100)},computed:{contactName:function(){return this.model.title},contactAge:function(){return this.model.age},contactGender:function(){if(this.model.gender)return this.model.gender},contactStatus:function(){return this.model.status},fields:function(){var t=[];function e(e,i){i.key=e,t.push(i)}return e("householdRole",{title:"Family Role",minimum:0,maximum:1,type:"string",directive:"select",defaultValues:[""],options:[{name:"None / Other",value:""},{name:"Parent",value:"parent"},{name:"Guardian",value:"guardian"},{name:"Child",value:"child"}]}),e("definition",{title:"Definition",minimum:0,maximum:1,type:"string",directive:"select",defaultValues:[""],options:this.contactDefinitions}),t}}},m=(i(971),i(0)),u=Object(m.a)(d,o,[],!1,null,null,null);u.options.__file="src/components/content/edit/components/FamilyMemberCard.vue";var c=u.exports,f=i(782),p=i(889),h=i(328),v=(i(19),{components:{AddressManager:p.a,FamilyMemberCard:c},created:function(){},mixins:[f.a],computed:{members:function(){return _.orderBy(this.model.items,(function(t){return"parent"==t.householdRole?-1:t.age?120-parseInt(t.age):0}))},fieldsOutput:function(){var t=this,e=[];d("title",{title:"Title/Family Name",placeholder:"Family Name",minimum:1,maximum:1,type:"string"}),d("phoneNumbers",{title:"Household Phone Number",minimum:0,maximum:0,type:"string"}),d("emails",{title:"Household Email Address",minimum:0,maximum:0,type:"string"});var i=[],n={title:"Definition",key:"definitions",type:"group",sameLine:!0};n.fields=[{title:"Household Role",key:"householdRole",minimum:0,maximum:1,type:"string",directive:"select",options:[{title:"None",value:""},{title:"Parent",value:"parent"},{title:"Child",value:"child"}]},{title:"Definition",key:"definition",minimum:0,maximum:1,type:"string",directive:"select",options:t.contactDefinitionOptions,expressions:{hide:function(){return!t.contactDefinitions||!t.contactDefinitions.length}}}],i.push(n);var o={title:"Names",key:"names",type:"group",sameLine:!0};o.fields=[{title:"First Name",key:"firstName",minimum:1,maximum:1,type:"string"},{title:"Last Name",key:"lastName",placeholder:t.model.title,minimum:0,maximum:1,type:"string",expressions:{defaultValue:function(){return t.model.title}}}],i.push(o);var l={title:"Bits",key:"bits",type:"group",sameLine:!0,fields:[{title:"Gender",key:"gender",minimum:0,maximum:1,type:"string",directive:"select",options:[{title:"Male",value:"male"},{title:"Female",value:"female"},{title:"Unknown",value:""}]},{title:"Date of Birth",key:"dob",minimum:0,maximum:1,type:"date"}]};i.push(l);var s={title:"Comms",key:"comms",type:"group",sameLine:!0,fields:[{title:"Email Address",key:"emails",minimum:0,maximum:0,type:"email"},{title:"Phone Number",key:"phoneNumbers",minimum:0,maximum:0,type:"string"}]};i.push(s);var a={title:"Comms",key:"comms",type:"group",sameLine:!0,fields:[]};a.fields=[{title:"Realms",description:"If different from the family",key:"realms",minimum:0,maximum:0,type:"reference",directive:"realmselect",params:{restrictType:"realm"},expressions:{defaultValue:function(){return t.model.realms.slice()}}},{title:"Tags",key:"tags",minimum:0,maximum:0,type:"reference",directive:"content-select-button",params:{restrictType:"tag",allDefinitions:!0}}],i.push({title:"School / Academic Calendar",key:"_academic",minimum:0,maximum:1,type:"string",customComponent:h.a,expressions:{hide:"model.householdRole == 'parent'"}}),i.push(a);var r="contact"==t.model._context?0:1;function d(t,i){i.key=t,e.push(i)}return d("items",{title:"contact"==t.model._context?"Additional Family Member":"Family Member",minimum:r,maximum:0,type:"group",asObject:!0,askCount:r,fields:i,expressions:{hide:function(){return"contact"==t.model._context}}}),e},membersLength:function(){return _.get(this.model,"items")?this.model.items.length:0},contactDefinitionOptions:function(){var t=this.contactDefinitions;return t.unshift({name:"None",value:""}),t}},methods:{toggleSamePostal:function(){return this.model.samePostal?this.$set(this.model,"samePostal",!1):this.$set(this.model,"samePostal",!0)},create:function(){var t=this,e={family:t.model,lastName:t.model.title};console.log("Create new contact",e),t.$fluro.global.create("contact",{template:e},!0).then((function(e){t.model.items.push(e)}))}},data:function(){return{}},asyncComputed:{contactDefinitions:{default:[],get:function(){var t=this;return new Promise((function(e,i){return t.$fluro.types.subTypes("contact").catch(i).then(e)})).catch((function(e){return console.log(e),t.$fluro.notify(e),reject(e)}))}}}}),x=(i(973),Object(m.a)(v,n,[],!1,null,null,null));x.options.__file="src/components/content/edit/panels/family.vue";e.default=x.exports},782:function(t,e,i){"use strict";var n=i(26);e.a={props:{config:{type:Object,required:!0},context:{type:String,default:"new"}},data:function(){return{loading:!1}},mounted:function(){this.$set(this.model,"_type",this.config.type.definitionName)},extends:n.default,components:{FluroContentForm:n.default,FluroContentFormField:function(){return Promise.resolve().then(i.bind(null,36))},FluroPrivacySelect:function(){return i.e(54).then(i.bind(null,783))}},computed:{type:function(){return this.config.type},typeName:function(){return this.type?this.type.definitionName:""},itemID:function(){return this.model._id},definition:function(){return this.config.definition},definedFields:function(){return this.definition&&this.definition.fields&&this.definition.fields.length?this.definition.fields:[]},readableContentType:function(){return this.$fluro.types.readable(this.config.definition?this.config.definition.definitionName:this.config.type.definitionName)},fullBody:function(){return this.definition&&this.definition.data&&this.definition.data.fullBody},hideBody:function(){return this.definition&&this.definition.data&&this.definition.data.hideBody},titleLabel:function(){return"Title"},bodyLabel:function(){return"Body"}},methods:{}}},846:function(t,e,i){var n=i(972);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(3).default)("0cdb43a3",n,!1,{})},847:function(t,e,i){var n=i(974);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(3).default)("4afa34fe",n,!1,{})},889:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.model?i("v-container",{attrs:{fluid:"","grid-list-lg":""}},[i("fluro-content-form",{attrs:{fields:t.fields},scopedSlots:t._u([{key:"form",fn:function(e){var n=e.formFields,o=e.fieldHash,l=e.model,s=e.update,a=e.options;return[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",sm12:""}},[i("fluro-content-form-field",{attrs:{"form-fields":n,options:a,field:o.addressLine1},on:{input:s},model:{value:l,callback:function(t){l=t},expression:"model"}})],1),t._v(" "),i("v-flex",{attrs:{xs12:"",sm12:""}},[i("fluro-content-form-field",{attrs:{"form-fields":n,options:a,field:o.addressLine2},on:{input:s},model:{value:l,callback:function(t){l=t},expression:"model"}})],1),t._v(" "),i("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[i("fluro-content-form-field",{attrs:{"form-fields":n,options:a,field:o.suburb},on:{input:s},model:{value:l,callback:function(t){l=t},expression:"model"}})],1),t._v(" "),i("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[i("fluro-content-form-field",{attrs:{"form-fields":n,options:a,field:o.state},on:{input:s},model:{value:l,callback:function(t){l=t},expression:"model"}})],1),t._v(" "),i("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[i("fluro-content-form-field",{attrs:{"form-fields":n,options:a,field:o.postalCode},on:{input:s},model:{value:l,callback:function(t){l=t},expression:"model"}})],1),t._v(" "),i("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[i("fluro-content-form-field",{attrs:{"form-fields":n,options:a,field:o.country},on:{input:s},model:{value:l,callback:function(t){l=t},expression:"model"}})],1)],1)]}}],null,!1,3582871058),model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1):t._e()};n._withStripped=!0;var o=i(26),l=i(36),s={props:{value:{type:Object,default:function(){return{}}}},components:{FluroContentForm:o.default,FluroContentFormField:l.default},data:function(){return{model:this.value,proposed:{}}},methods:{},computed:{fields:function(){var t=[];function e(e,i){i.key=e,t.push(i)}return e("addressLine1",{title:"Address Line 1",minimum:0,maximum:1,type:"string"}),e("addressLine2",{title:"Address Line 2",minimum:0,maximum:1,type:"string"}),e("suburb",{title:"Suburb",minimum:0,maximum:1,type:"string"}),e("state",{title:"State",minimum:0,maximum:1,type:"string"}),e("postalCode",{title:"Postal Code",minimum:0,maximum:1,type:"string"}),e("country",{title:"Country",minimum:0,maximum:1,type:"string",directive:"countryselect"}),t}}},a=i(0),r=Object(a.a)(s,n,[],!1,null,null,null);r.options.__file="src/components/content/edit/components/AddressManager.vue";e.a=r.exports},971:function(t,e,i){"use strict";var n=i(846);i.n(n).a},972:function(t,e,i){(t.exports=i(2)(!1)).push([t.i,".card{width:100%;height:100%}.avatar-icon{width:80% !important;display:block}.avatar-flex{display:flex;width:100%;justify-content:center}.status-flex{display:flex;width:100%;justify-content:center}.text-centered{text-align:center}.less-padding{padding:4px 8px !important}.archived{opacity:0.5}.draft{border:dashed orange 1px}\n",""])},973:function(t,e,i){"use strict";var n=i(847);i.n(n).a},974:function(t,e,i){(t.exports=i(2)(!1)).push([t.i,".no-border-no-background .toggle-item{border:none !important;background:none !important;font-size:14px;padding:0px}.cards{width:200px !important;background-color:white;margin:10px}.border{border-color:rgba(0,0,0,0.05);border-style:solid;border-width:1px}.ghost-card{padding:16px;width:200px !important;margin:10px;border:1px dashed #ccc;color:inherit;background-color:transparent;transition:background-color 0.3s}.ghost-card:hover{background-color:white}.add-circle{border:1px dashed #ccc;border-radius:50%;height:132.8px;width:132.8px;padding:8px;margin:auto;display:flex;justify-content:center;align-items:center}.filler-ghost{height:100%;display:block}.add-icon{width:100%;height:100%}.add-contact-text{text-align:center;padding-top:16px}\n",""])}}]);