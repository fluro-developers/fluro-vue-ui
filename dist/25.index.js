(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1025:function(t,e,n){"use strict";var i=n(912);n.n(i).a},1026:function(t,e,n){(t.exports=n(5)(!1)).push([t.i,"input[data-v-55a347c8]{width:100%;min-width:70px;text-align:center;font-size:0.9em;padding:5px}\n",""])},1027:function(t,e,n){"use strict";var i=n(913);n.n(i).a},1028:function(t,e,n){(t.exports=n(5)(!1)).push([t.i,".plan-table-wrapper{position:relative;flex:1;display:flex;overflow:hidden}.plan-table-wrapper .cog-btn{position:absolute;top:0px;right:0px;width:38px;z-index:3;text-align:center}.plan-table{flex:1;position:relative;width:100%;z-index:1;margin:auto;overflow:auto;background:#f0f2f5;height:100%}.plan-table p{margin-bottom:5px !important}.plan-table mention{font-size:0.8em;font-weight:500;background:rgba(0,0,0,0.1);border-radius:100px;padding:2px 4px;display:inline-block;margin:0 4px}.plan-table .cell{padding:4px 8px;word-wrap:break-word;white-space:pre-wrap}.plan-table .placeholder{padding-bottom:2px;padding-top:2px;opacity:0;font-size:0.8em;font-style:italic}.plan-table .row-song-key{min-width:30px;display:block;text-align-last:center;appearance:none;border:none;outline:none;font-weight:500}.plan-table .row-song-key,.plan-table .row-title{font-size:1.1em}.plan-table .row-song-key .cell,.plan-table .row-title .cell{padding-bottom:0}.plan-table .row-detail .cell{padding-top:0}.plan-table table{width:100%;min-width:600px;margin:auto;border-collapse:separate;border-spacing:0}.plan-table table th,.plan-table table td{text-align:left;padding:5px;border-bottom:1px solid #e8edf1;border-right:1px solid #e8edf1;height:inherit;white-space:nowrap}.plan-table table tr{height:1px;background:#fff}.plan-table table tr .dragger{opacity:0}.plan-table table tr:hover .placeholder{opacity:0.5}.plan-table table tr:hover .dragger{opacity:0.5}.plan-table table tr th:first-child,.plan-table table tr th:last-child{background:#fff}.plan-table table tr:nth-child(odd){background:#fcfcfc}.plan-table table tr:nth-child(odd) th:first-child,.plan-table table tr:nth-child(odd) th:last-child{background:#fcfcfc}.plan-table table tr.song{background:#fffbdd;color:#6b5f31}.plan-table table tr.song th:first-child,.plan-table table tr.song th:last-child{background:#fffbdd}.plan-table table tr.breaker{background:#f0f2f5}.plan-table table tr.breaker th,.plan-table table tr.breaker td{border-right:none;border-top:1px solid #e8edf1;border-bottom:1px solid #e8edf1}.plan-table table tr.breaker th .cell,.plan-table table tr.breaker td .cell{padding:15px}.plan-table table tr.breaker th.row-title .cell,.plan-table table tr.breaker td.row-title .cell{padding-top:inherit}.plan-table table tr.breaker th:first-child,.plan-table table tr.breaker th:last-child{background:#f0f2f5}.plan-table table tr.breaker .row-title-text{opacity:0.7;text-transform:uppercase;font-weight:600;letter-spacing:0.05em;font-size:0.8em}.plan-table table tr.start{background:#93d3c8}.plan-table table tr.start th,.plan-table table tr.start td{border-right:none;border-top:1px solid #e8edf1;border-bottom:1px solid #e8edf1}.plan-table table tr.start th .cell,.plan-table table tr.start td .cell{padding:5px}.plan-table table tr.start th.row-title .cell,.plan-table table tr.start td.row-title .cell{padding-top:inherit}.plan-table table tr.start th:first-child,.plan-table table tr.start th:last-child{background:#93d3c8}.plan-table table tr.start .row-title-text{opacity:0.7;text-transform:uppercase;font-weight:600;letter-spacing:0.05em;font-size:0.8em}.plan-table table td{vertical-align:top;padding:0;position:relative}.plan-table table td.duration-cell{text-align:center}.plan-table table td:hover{background:rgba(0,0,255,0.05)}.plan-table table td p:last-child,.plan-table table td .fluro-editor{margin-bottom:0 !important}.plan-table table td .fluro-inline-edit{min-height:100%;min-width:100%;display:block;width:100%;position:relative;float:left}.plan-table table td .fluro-inline-edit{width:100%;height:100%;display:block}.plan-table table td .fluro-inline-edit .inline-edit-default{height:auto !important;width:auto !important}.plan-table table td .fluro-inline-edit .inline-edit-input{background:#fff;position:absolute;left:0;top:0;right:0}.plan-table table td .fluro-inline-edit .inline-edit-input.inline-show{border-radius:3px;border:3px solid blue;box-shadow:0 4px 10px rgba(0,0,0,0.3);z-index:3}.plan-table table td .fluro-inline-edit input,.plan-table table td .fluro-inline-edit select{margin:0;max-width:100%;width:100%;display:block;padding:4px 8px;line-height:1}.plan-table table thead th{background:#fff;font-size:0.8em;position:-webkit-sticky;position:sticky;top:0;z-index:3;border-bottom:3px solid rgba(0,0,0,0.1)}.plan-table table thead th.center{text-align:center}.plan-table table thead th.shrink{width:1px}.plan-table table thead th.detail{max-width:300px}.plan-table table tfoot th,.plan-table table tfoot td{position:-webkit-sticky;position:sticky;bottom:0;z-index:4;background:#f0f2f5 !important;border:none !important;border-top:1px solid rgba(0,0,0,0.1) !important}.plan-table table th:first-child,.plan-table table th:last-child{position:-webkit-sticky;position:sticky;z-index:2;vertical-align:center !important;text-align:center}.plan-table table th:first-child:first-child,.plan-table table th:last-child:first-child{left:0;width:1px;border-right:1px solid #e8edf1}.plan-table table th:first-child:last-child,.plan-table table th:last-child:last-child{right:0;width:1px;border-left:1px solid #e8edf1}.plan-table table thead th:first-child,.plan-table table thead th:last-child,.plan-table table tfoot th:first-child,.plan-table table tfoot th:last-child{z-index:5}.plan-table table tr.sortable-ghost{opacity:0.3}.plan-table table tr.sortable-ghost th,.plan-table table tr.sortable-ghost td{border-color:greyscale(#89a3b7, 1%) !important;background:greyscale(#89a3b7, 1%) !important}.plan-table table td .fluro-editor-textarea{min-height:0}.plan-table table td .fluro-editor-textarea>div{border-radius:0 !important;padding:4px 8px !important;border:none !important}\n",""])},802:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("flex-column",[t.loading?[n("fluro-page-preloader",{attrs:{contain:""}})]:n("tabset",{attrs:{justified:!0,vertical:!0}},[n("tab",{attrs:{heading:"Plan"}},[n("div",{staticClass:"plan-table-wrapper"},[n("v-menu",{staticStyle:{position:"relative"},attrs:{attach:"","offset-x":"",left:"","close-on-content-click":!1,transition:"slide-x-transition"},nativeOn:{click:function(t){t.stopPropagation()}},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("div",t._g({staticClass:"cog-btn"},i),[n("v-btn",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"ma-0",attrs:{content:"Configure Columns",small:"",icon:""}},[n("fluro-icon",{attrs:{icon:"cog"}})],1)],1)]}}])},[t._v(" "),n("v-card",{attrs:{tile:""}},[n("v-container",{staticStyle:{background:"#f0f2f5"},attrs:{"pa-3":""}},[n("fluro-content-form-field",{attrs:{field:t.columnEditField},on:{input:t.updateColumns},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1)],1)],1),t._v(" "),n("div",{ref:"container",staticClass:"plan-table"},[n("table",{staticClass:"main-table",attrs:{id:"main-table"}},[n("thead",[n("tr",[n("th"),t._v(" "),n("th",{staticClass:"shrink center"},[n("fluro-icon",{attrs:{icon:"clock"}})],1),t._v(" "),n("th",{staticClass:"detail"},[t._v("Detail")]),t._v(" "),t._l(t.columns,(function(e,i){return n("th",{key:i},[t._v("\n                                    "+t._s(e.title)+"\n                                ")])})),t._v(" "),n("th",[n("div",{staticStyle:{width:"28px",height:"22px"}})])],2)]),t._v(" "),n("draggable",t._b({attrs:{tag:"tbody",handle:".handle"},on:{start:function(e){t.drag=!0},end:function(e){t.drag=!1},sort:function(e){return t.calculateDurations()}},model:{value:t.model.schedules,callback:function(e){t.$set(t.model,"schedules",e)},expression:"model.schedules"}},"draggable",t.dragOptions,!1),t._l(t.model.schedules,(function(e,i){return n("plan-row",{key:e.guid,attrs:{index:i,plan:t.model},on:{delete:function(e){return t.remove(i)},swap:function(e){return t.swap(i)},duplicate:function(e){return t.duplicate(i)},add:t.addFromRow},model:{value:t.model.schedules[i],callback:function(e){t.$set(t.model.schedules,i,e)},expression:"model.schedules[index]"}})})),1),t._v(" "),n("tfoot",[n("tr",[n("th",{attrs:{colspan:"2"}}),t._v(" "),n("td",[n("v-btn",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"ma-2",staticStyle:{border:"1px solid #ddd",background:"#fff"},attrs:{content:"Add Row"},on:{click:function(e){return t.add("row")}}},[n("fluro-icon",{attrs:{icon:"plus"}})],1),t._v(" "),n("v-btn",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"ma-2",staticStyle:{border:"1px solid #ddd",background:"#fff"},attrs:{content:"Add Songs"},on:{click:function(e){return t.add("song")}}},[n("fluro-icon",{attrs:{icon:"music"}})],1),t._v(" "),n("v-btn",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"ma-2",staticStyle:{border:"1px solid #ddd",background:"#fff"},attrs:{content:"Add Section"},on:{click:function(e){return t.add("breaker")}}},[n("fluro-icon",{attrs:{icon:"megaphone"}})],1),t._v(" "),-1==t.startRowIndex?n("v-btn",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"ma-2",staticStyle:{border:"1px solid #ddd",background:"#fff"},attrs:{content:"Add Start Time"},on:{click:function(e){return t.add("start")}}},[n("fluro-icon",{attrs:{icon:"clock"}})],1):t._e()],1),t._v(" "),t._l(t.columns,(function(t){return n("td")})),t._v(" "),n("th")],2)])],1)])],1)]),t._v(" "),t.definition?n("tab",{attrs:{heading:t.definition.title+" details"}},[t._t("default",[n("flex-column-body",{staticStyle:{background:"#fafafa"}},[n("v-container",[n("constrain",{attrs:{sm:""}},[n("h3",{attrs:{margin:""}},[t._v(t._s(t.definition.title))]),t._v(" "),n("fluro-content-form",{attrs:{options:t.options,fields:t.definition.fields},model:{value:t.model.data,callback:function(e){t.$set(t.model,"data",e)},expression:"model.data"}})],1)],1)],1)])],2):t._e()],1)],2)};i._withStripped=!0;n(95),n(14),n(34);var a=n(74),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",{class:t.type},[n("th",{staticClass:"handle"},[n("v-btn",{staticClass:"ma-0",attrs:{icon:"",small:""}},[n("fluro-icon",{staticClass:"dragger",attrs:{icon:"arrows"}})],1)],1),t._v(" "),n("td",{staticClass:" duration-cell"},["breaker"!=t.type&&"start"!=t.type?n("fluro-inline-edit",{attrs:{enabled:t.row.editDuration},scopedSlots:t._u([{key:"default",fn:function(){return[n("div",{staticClass:"cell"},[n("div",[t._v(t._s(t.row.time))]),t._v(" "),n("div",{staticClass:"sm muted"},[n("em",[t._v(t._s(t._f("mins")(t.row.duration)))])])])]},proxy:!0},{key:"edit",fn:function(e){e.props;var i=e.blur,a=e.focus;return[n("duration-picker",{on:{focus:function(t){return a(t)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:i(e)},blur:i},model:{value:t.row.duration,callback:function(e){t.$set(t.row,"duration",e)},expression:"row.duration"}})]}}],null,!1,1803891112)}):t._e()],1),t._v(" "),n("td",[n("v-layout",[n("v-flex",[n("div",{staticClass:"row-title"},[n("fluro-inline-edit",{attrs:{enabled:t.row.editTitle},scopedSlots:t._u([{key:"default",fn:function(){return[n("div",{staticClass:"cell"},[n("strong",{staticClass:"row-title-text"},[t._v(t._s(t.row.title))])])]},proxy:!0},{key:"edit",fn:function(e){e.props;var i=e.blur,a=e.focus;return[n("input",{directives:[{name:"model",rawName:"v-model",value:t.row.title,expression:"row.title"}],ref:"title",domProps:{value:t.row.title},on:{focus:function(t){return a(t)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:i(e)},blur:i,input:function(e){e.target.composing||t.$set(t.row,"title",e.target.value)}}})]}}])})],1)]),t._v(" "),"song"==t.type?n("div",[n("select",{directives:[{name:"model",rawName:"v-model",value:t.row.key,expression:"row.key"}],staticClass:"row-song-key cell",attrs:{placeholder:"Select a Key"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.row,"key",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[t._v("(Select Key)")]),t._v(" "),t._l(t.songKeys,(function(e){return n("option",{domProps:{value:e}},[t._v(t._s(e))])}))],2)]):t._e()],1),t._v(" "),"breaker"!=t.type&&"start"!=t.type?n("div",{staticClass:"row-detail"},[n("fluro-inline-edit",{attrs:{enabled:t.row.editDetail},scopedSlots:t._u([{key:"default",fn:function(){return[t.row.detail?n("div",{staticClass:"cell"},[n("div",{domProps:{innerHTML:t._s(t.row.detail)}})]):n("div",{staticClass:"cell placeholder"},[t._v("Click here to add extra details")])]},proxy:!0},{key:"edit",fn:function(e){e.props;var i=e.blur,a=e.focus;return[n("fluro-editor",{attrs:{options:t.detailBodyOptions,placeholder:"Add extra detail and notes"},on:{focus:a,blur:i},model:{value:t.row.detail,callback:function(e){t.$set(t.row,"detail",e)},expression:"row.detail"}})]}}],null,!1,3266597843)})],1):t._e()],1),t._v(" "),t._l(t.columns,(function(e){return n("column-cell",{key:e.key,attrs:{column:e,row:t.row},model:{value:t.row.notes[e.key],callback:function(n){t.$set(t.row.notes,e.key,n)},expression:"row.notes[column.key]"}})})),t._v(" "),n("th",{staticStyle:{padding:"0"}},[n("v-menu",{attrs:{attach:"","nudge-left":10,"offset-x":"",left:"",bottom:t.index<t.plan.schedules.length/2,top:t.index>t.plan.schedules.length/2,transition:"slide-x-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-btn",t._g({staticClass:"ma-0",attrs:{icon:""}},i),[t.actionsOpen?n("fluro-icon",{attrs:{icon:"times"}}):n("fluro-icon",{attrs:{icon:"ellipsis-v"}})],1)]}}]),model:{value:t.actionsOpen,callback:function(e){t.actionsOpen=e},expression:"actionsOpen"}},[t._v(" "),n("div",{staticStyle:{background:"#fff",width:"250px","text-align":"left"}},[n("v-list",{attrs:{dense:""}},[n("v-list-tile",{attrs:{disabled:""}},[n("v-label",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[n("fluro-icon",{attrs:{type:"plan",left:""}}),t._v(t._s(t.row.title)+"\n                        ")],1)],1),t._v(" "),n("v-divider"),t._v(" "),"song"==t.row.type?n("v-list-tile",{on:{click:function(e){return t.swap()}}},[n("fluro-icon",{attrs:{icon:"retweet",left:""}}),t._v("Replace song\n                        ")],1):t._e(),t._v(" "),t._l(t.availableActions,(function(e){return n("v-list-tile",{on:{click:e.click}},[n("fluro-icon",{attrs:{icon:e.icon,left:""}}),t._v(t._s(e.title)+"\n                        ")],1)})),t._v(" "),n("v-divider"),t._v(" "),n("v-list-tile",{on:{click:function(e){return t.remove()}}},[n("fluro-icon",{attrs:{icon:"trash-alt",left:""}}),t._v("Delete\n                        ")],1)],2)],1)])],1)],2)};l._withStripped=!0;n(17);var o=n(27),r=n.n(o),s=n(87),d=n(119),c=function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.number,expression:"number",modifiers:{lazy:!0}}],attrs:{pattern:"[0-9]*",placeholder:"Duration (mins)",inputmode:"numeric"},domProps:{value:t.number},on:{focus:function(e){return t.$emit("focus")},blur:t.blur,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.blur(e)},change:function(e){t.number=e.target.value}}})};c._withStripped=!0;n(30),n(15);var u={props:{value:{type:[Number,String]}},data:function(){return{model:parseInt(this.value||0)}},methods:{focus:function(){this.$emit("focus")},blur:function(){this.$emit("blur")}},computed:{number:{get:function(){return this.$fluro.utils.hhmmss(this.model)},set:function(t){t||(t="00:00:00");var e=t.split(":");e.length||(e=["00","00","00"]),1==e.length?(e.unshift("00"),e.push("00")):2==e.length&&e.unshift("00");var n=(t=_.map(e,(function(t){return t.length<2?"0".concat(t):t.slice(0,2)})).join(":")).match(/^(\d{2}):([0-5]\d):([0-5]\d)$/);n&&(t=3600*+n[1]+60*+n[2]+ +n[3],this.model=t,this.$emit("input",this.model))}}}},p=(n(1025),n(0)),f=Object(p.a)(u,c,[],!1,null,"55a347c8",null);f.options.__file="src/components/content/edit/components/DurationPicker.vue";var b=f.exports,h=r.a.extend({props:{value:{type:String},row:{type:Object},column:{type:Object},index:{type:Number}},data:function(){return{model:this.value}},components:{FluroInlineEdit:s.a,FluroEditor:d.a},computed:{detailBodyOptions:function(){return{disable:{bubble:!1,bar:!0}}},placeholder:function(){return"".concat(this.column.title," Notes")},input:{get:function(){return this.model},set:function(t){this.model=t,this.$emit("input",this.model)}}},template:'\n    <td>\n    <fluro-inline-edit v-if="row.type != \'breaker\'">\n        <template v-slot:default>\n            <div class="cell " v-html="model"></div>\n        </template>\n        <template v-slot:edit="{props, blur, focus}">\n            <fluro-editor @focus="focus" @blur="blur" v-model="input" :options="detailBodyOptions" :placeholder="placeholder" />\n        </template>\n    </fluro-inline-edit>\n    </td>'}),m={props:{value:{type:Object},index:{type:Number},plan:{type:Object}},components:{ColumnCell:h,FluroInlineEdit:s.a,FluroEditor:d.a,DurationPicker:b},watch:{value:function(t){this.row=t}},mounted:function(){var t=this;t.$nextTick((function(){t.row.isNew&&t.$refs.title&&(t.$refs.title.focus(),t.$refs.title.select(),console.log("ADDED"))}))},data:function(){return{actionsOpen:!1,row:this.value,added:!1}},created:function(){this.row.notes||(this.row.notes={})},methods:{swap:function(){"song"==this.row.type&&this.$emit("swap")},remove:function(){this.$emit("delete")}},computed:{songKeys:function(){return["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"]},availableActions:function(){var t=this,e=[{title:"Add Row",icon:"plus",click:function(){t.$emit("add",{index:t.index,type:"item"})}},{title:"Add Songs",icon:"music",click:function(){t.$emit("add",{index:t.index,type:"song"})}},{title:"Add Section",icon:"megaphone",click:function(){t.$emit("add",{index:t.index,type:"breaker"})}}];return"start"!=t.type&&e.push({title:"Duplicate this row",icon:"copy",click:function(){t.$emit("duplicate")}}),e},type:function(){return this.row.type},detailBodyOptions:function(){return{disable:{bubble:!1,bar:!0}}},teams:function(){return this.plan.teams},columns:function(){return _.map(this.teams,(function(t){return{title:t,key:t}}))}},filters:{mins:function(t){if(!t)return"";var e=Math.floor(t/3600),n=Math.floor((t-3600*e)/60),i=t-3600*e-60*n;function a(t){return("0"+t).slice(-2)}return(n=n||"",i=i||"",(e=e||"")?"".concat(a(e),":").concat(a(n),":").concat(a(i)):n&&i?"".concat(n,"m ").concat(i,"s "):n?"".concat(n," mins"):"".concat(i,"s"))}}},g=Object(p.a)(m,l,[],!1,null,null,null);g.options.__file="src/components/content/edit/components/PlanRow.vue";var v=g.exports,y=n(844),w={components:{draggable:a.default,PlanRow:v},props:{},mixins:[y.a],created:function(){var t=this;_.each(t.model.schedules,(function(e){t.$set(e,"guid",t.$fluro.utils.guid())})),t.calculateDurations()},watch:{times:"calculateDurations"},methods:{calculateDurations:function(){var t=this,e=t.startRowIndex;-1==e&&(e=0);var n=_.get(t.model,"event.startDate"),i=_.get(t.model,"startDate"),a=!!n&&new Date(n)||!!i&&new Date(i)||new Date;function l(e){var n=new Date(JSON.parse(JSON.stringify(a)));return e<0?n.setTime(a.getTime()- -1*e):n.setTime(a.getTime()+e),t.$fluro.date.formatDate(n,"h:mma")}var o=t.model.schedules,r=o.slice(0,e).reverse(),s=o.slice(e);_.reduce(r,(function(e,n,i){return n.duration&&(e+=1e3*parseInt(n.duration)),t.$set(n,"time",l(-e)),t.$set(n,"elapsedTime",-e),e}),0),_.reduce(s,(function(e,n,i){return t.$set(n,"time",l(e)),n.duration&&(e+=1e3*parseInt(n.duration)),t.$set(n,"elapsedTime",e),e}),0)},updateColumns:function(){this.$set(this.model,"teams",this.model.teams.slice())},selectSongs:function(){return this.$fluro.global.select("song",{minimum:0,maximum:0},!0)},injectSongs:function(t){var e=this;return e.selectSongs().then((function(n){var i=_.map(n,(function(t){var n=e.getDuration(t),i=e.getDefaultKey(t);return{title:t.title,type:"song",links:[t._id],_id:t._id,duration:n,key:i,notes:{},isNew:!0,guid:e.$fluro.utils.guid()}}));_.each(i,(function(n,i){if(t||0==t){var a=t+1+i;e.model.schedules.splice(a,0,n)}else e.model.schedules.push(n)}))}))},createRows:function(t){switch(t){case"breaker":return[{title:"Section",type:"breaker",duration:0,links:[],notes:{},isNew:!0,guid:this.$fluro.utils.guid()}];case"start":return[{title:"Event Start",type:"start",duration:0,links:[],notes:{},isNew:!0,guid:this.$fluro.utils.guid()}];default:return[{title:"New item",duration:300,links:[],notes:{},isNew:!0,guid:this.$fluro.utils.guid()}]}},remove:function(t){this.model.schedules.splice(t,1),console.log("Removed item")},addFromRow:function(t){var e=this;if("song"==t.type)return e.injectSongs(t.index);var n=e.createRows(t.type);_.each(n,(function(n,i){e.model.schedules.splice(t.index+1+i,0,n)}))},duplicate:function(t){var e=JSON.parse(JSON.stringify(this.model.schedules[t]));e.guid=this.$fluro.utils.guid(),this.model.schedules.splice(t+1,0,e)},getDuration:function(t){return 300},getDefaultKey:function(t){return""},swap:function(t){var e=this;return e.selectSongs().then((function(n){var i=_.map(n,(function(t){var n=e.getDuration(t),i=e.getDefaultKey(t);return{title:t.title,type:"song",links:[t._id],_id:t._id,duration:n,key:i,notes:{},isNew:!0,guid:e.$fluro.utils.guid()}}));_.each(i,(function(n,i){e.model.schedules.splice(t,0===i?1:0,n)}))}))},add:function(t){var e=this;if(e.model.schedules||e.$set(e.model,"schedules",[]),"song"==t)return e.injectSongs();var n=e.createRows(t);_.each(n,(function(t){e.model.schedules.push(t)}));var i=e.$refs.container;i.scrollTo({top:i.scrollHeight+i.offsetHeight,left:0,behavior:"smooth"})}},computed:{times:function(){return _.map(this.model.schedules,"duration").join("-")},startRow:function(){return this.model.schedules[this.startRowIndex]},startRowIndex:function(){return _.findIndex(this.model.schedules,{type:"start"})},fieldsOutput:function(){var t,e=[];return(t={title:"Plan Starts",minimum:0,maximum:1,type:"date",directive:"datetimepicker"}).key="startDate",e.push(t),e},columnEditField:function(){return{key:"teams",minimum:0,maximum:0,title:"Extra Column",type:"string",placeholder:"Eg. Lighting, MC, Band"}},teams:function(){return this.model.teams},columns:function(){return _.chain(this.teams).compact().map((function(t){return{title:t,key:t}})).value()}},data:function(){return{actionsOpen:!1,drag:!1,dragOptions:{}}}},x=(n(1027),Object(p.a)(w,i,[],!1,null,null,null));x.options.__file="src/components/content/edit/panels/plan.vue";e.default=x.exports},844:function(t,e,n){"use strict";var i=n(41);e.a={props:{config:{type:Object,required:!0},context:{type:String,default:"new"}},data:function(){return{loading:!1}},mounted:function(){this.$set(this.model,"_type",this.config.type.definitionName)},extends:i.default,components:{FluroContentForm:i.default,FluroContentFormField:function(){return Promise.resolve().then(n.bind(null,60))},FluroPrivacySelect:function(){return n.e(44).then(n.bind(null,845))}},computed:{type:function(){return this.config.type},typeName:function(){return this.type?this.type.definitionName:""},itemID:function(){return this.model._id},definition:function(){return this.config.definition},definedFields:function(){return this.definition&&this.definition.fields&&this.definition.fields.length?this.definition.fields:[]},readableContentType:function(){return this.$fluro.types.readable(this.config.definition?this.config.definition.definitionName:this.config.type.definitionName)},fullBody:function(){return this.definition&&this.definition.data&&this.definition.data.fullBody},hideBody:function(){return this.definition&&this.definition.data&&this.definition.data.hideBody},titleLabel:function(){return"Title"},bodyLabel:function(){return"Body"}},methods:{}}},912:function(t,e,n){var i=n(1026);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n(6).default)("b7b4594a",i,!1,{})},913:function(t,e,n){var i=n(1028);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n(6).default)("65db5f8b",i,!1,{})}}]);