(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1001:function(e,t,i){"use strict";var n=i(900);i.n(n).a},1002:function(e,t,i){(e.exports=i(5)(!1)).push([e.i,".card{width:100%;height:100%}.avatar-icon{width:80% !important;display:block}.avatar-flex{display:flex;width:100%;justify-content:center}.status-flex{display:flex;width:100%;justify-content:center}.text-centered{text-align:center}.less-padding{padding:4px 8px !important}.archived{opacity:0.5}.draft{border:dashed orange 1px}\n",""])},1003:function(e,t,i){"use strict";var n=i(901);i.n(n).a},1004:function(e,t,i){(e.exports=i(5)(!1)).push([e.i,".no-border-no-background .toggle-item{border:none !important;background:none !important;font-size:14px;padding:0px}.cards{width:200px !important;background-color:white;margin:10px}.border{border-color:rgba(0,0,0,0.05);border-style:solid;border-width:1px}.ghost-card{padding:16px;width:200px !important;margin:10px;border:1px dashed #ccc;color:inherit;background-color:transparent;transition:background-color 0.3s}.ghost-card:hover{background-color:white}.add-circle{border:1px dashed #ccc;border-radius:50%;height:132.8px;width:132.8px;padding:8px;margin:auto;display:flex;justify-content:center;align-items:center}.filler-ghost{height:100%;display:block}.add-icon{width:100%;height:100%}.add-contact-text{text-align:center;padding-top:16px}\n",""])},805:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("flex-column",[e.loading?[i("fluro-page-preloader",{attrs:{contain:""}})]:[i("tabset",{attrs:{justified:!0,vertical:!0}},[i("tab",{attrs:{heading:"Details"}},[i("flex-column-body",{staticStyle:{background:"#fafafa"}},[i("v-container",{attrs:{fluid:"","grid-list-lg":""}},[i("constrain",{attrs:{sm:""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",sm12:""}},[i("fluro-content-form-field",{attrs:{"form-fields":e.formFields,outline:e.showOutline,options:e.options,field:e.fieldHash.title},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1),e._v(" "),e.model._id?e._e():i("v-flex",{attrs:{xs12:"",sm12:""}},[i("fluro-content-form-field",{attrs:{"form-fields":e.formFields,outline:e.showOutline,options:e.options,field:e.fieldHash.items},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",sm6:""}},[i("fluro-content-form-field",{attrs:{"form-fields":e.formFields,outline:e.showOutline,options:e.options,field:e.fieldHash.emails},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",sm6:""}},[i("fluro-content-form-field",{attrs:{"form-fields":e.formFields,outline:e.showOutline,options:e.options,field:e.fieldHash.phoneNumbers},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",sm12:""}},[i("fluro-panel",[i("fluro-panel-title",[e._v("\n                                               Home Address\n                                           ")]),e._v(" "),i("fluro-panel-body",[i("address-manager",{model:{value:e.model.address,callback:function(t){e.$set(e.model,"address",t)},expression:"model.address"}})],1)],1)],1),e._v(" "),i("v-flex",[i("fluro-panel",[i("fluro-panel-title",[i("div",{staticClass:"no-border-no-background",on:{click:function(t){return e.toggleSamePostal()}}},[i("fluro-toggle-item",{attrs:{inactive:!e.model.samePostal}},[e._v("Different Postal Address")])],1)]),e._v(" "),e.model.samePostal?i("fluro-panel-body",[i("address-manager",{model:{value:e.model.postalAddress,callback:function(t){e.$set(e.model,"postalAddress",t)},expression:"model.postalAddress"}})],1):e._e()],1)],1)],1)],1)],1)],1)],1),e._v(" "),e.model._id?i("tab",{attrs:{heading:e.membersLength+" Members"}},[i("flex-column-body",{staticStyle:{background:"#fafafa"}},[i("v-container",{attrs:{fluid:"","grid-list-lg":""}},[i("v-layout",{staticStyle:{"overflow-x":"scroll"},attrs:{row:"",wrap:"","justify-space-around":"","fill-height":""}},[e._l(e.members,(function(t,n){return i("div",{staticClass:"cards border"},[i("family-member-card",{attrs:{contactDefinitions:e.contactDefinitionOptions},model:{value:e.members[n],callback:function(t){e.$set(e.members,n,t)},expression:"members[index]"}})],1)})),e._v(" "),i("div",{staticClass:"ghost-card",on:{click:e.create}},[i("div",{staticClass:"add-contact ghost"},[i("div",{staticClass:"add-circle"},[i("fluro-icon",{staticClass:"add-icon",attrs:{icon:"plus"}})],1),e._v(" "),i("h5",{staticClass:"add-contact-text"},[e._v("Add Contact")])])])],2)],1)],1)],1):e._e(),e._v(" "),e.definition&&e.definition.fields&&e.definition.fields.length?i("tab",{attrs:{heading:e.definition.title+" Information"}},[i("fluro-content-form",{attrs:{options:e.options,fields:e.definition.fields},model:{value:e.model.data,callback:function(t){e.$set(e.model,"data",t)},expression:"model.data"}})],1):e._e()],1)]],2)};n._withStripped=!0;var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.model?i("v-container",{staticClass:"card",class:e.model.status,attrs:{fluid:"","grid-lines-sm":""}},[i("fluro-content-form",{attrs:{fields:e.fields},on:{input:e.save},scopedSlots:e._u([{key:"form",fn:function(t){var n=t.formFields,o=t.fieldHash,s=t.model,l=t.update,a=t.options;return[i("v-layout",{attrs:{column:""}},[i("v-flex",{staticClass:"avatar-flex"},[i("fluro-avatar",{staticClass:"avatar-icon",attrs:{id:s._id,type:"contact"}})],1),e._v(" "),i("v-flex",{staticClass:"text-centered less-padding"},[i("h4",[e._v(e._s(e.contactName))])]),e._v(" "),i("v-flex",{staticClass:"less-padding status-flex"},[i("fluro-status-select",{model:{value:s.status,callback:function(t){e.$set(s,"status",t)},expression:"model.status"}})],1),e._v(" "),i("v-flex",{staticClass:"text-centered less-padding"},[i("p",{staticClass:"muted",staticStyle:{"margin-bottom":"0px"}},[e._v(e._s(e.contactGender)+" "+e._s(e.contactAge))])]),e._v(" "),i("v-flex",{staticClass:"less-padding"},[i("fluro-content-form-field",{attrs:{"form-fields":n,options:a,field:o.householdRole},on:{input:l},model:{value:s,callback:function(e){s=e},expression:"model"}})],1),e._v(" "),i("v-flex",{staticClass:"less-padding"},[i("fluro-content-form-field",{attrs:{"form-fields":n,options:a,field:o.definition},on:{input:l},model:{value:s,callback:function(e){s=e},expression:"model"}})],1)],1)]}}],null,!1,4283816483),model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1):e._e()};o._withStripped=!0;var s=i(41),l=i(60),a=i(184),r=i(93),d={props:{value:{type:Object,default:{}},contactDefinitions:{type:Array}},components:{FluroContentForm:s.default,FluroContentFormField:l.default,FluroStatusSelect:a.a,FluroAvatar:r.a},data:function(){return{model:this.value}},created:function(){this.model.definition||(this.model.definition=""),this.model.householdRole||(this.model.householdRole="")},watch:{contactStatus:function(){this.save()}},methods:{save:_.debounce((function(){console.log("TRIGGER UPDATE");var e=this,t={householdRole:e.model.householdRole,definition:e.model.definition,status:e.model.status};e.$fluro.api.put("content/contact/".concat(e.model._id),t).then((function(t){e.$fluro.notify("".concat(e.model.title," was successfully updated!"))})).catch((function(t){e.$fluro.error(t)}))}),100)},computed:{contactName:function(){return this.model.title},contactAge:function(){return this.model.age},contactGender:function(){if(this.model.gender)return this.model.gender},contactStatus:function(){return this.model.status},fields:function(){var e=[];function t(t,i){i.key=t,e.push(i)}return(t("householdRole",{title:"Family Role",minimum:0,maximum:1,type:"string",directive:"select",defaultValues:[""],options:[{name:"None / Other",value:""},{name:"Parent",value:"parent"},{name:"Guardian",value:"guardian"},{name:"Child",value:"child"}]}),t("definition",{title:"Definition",minimum:0,maximum:1,type:"string",directive:"select",defaultValues:[""],options:this.contactDefinitions}),e)}}},m=(i(1001),i(0)),u=Object(m.a)(d,o,[],!1,null,null,null);u.options.__file="src/components/content/edit/components/FamilyMemberCard.vue";var c=u.exports,f=i(844),p=i(940),h=i(368),v=(i(27),{components:{AddressManager:p.a,FamilyMemberCard:c},created:function(){},mixins:[f.a],computed:{members:function(){return _.orderBy(this.model.items,(function(e){return"parent"==e.householdRole?-1:e.age?120-parseInt(e.age):0}))},fieldsOutput:function(){var e=this,t=[];d("title",{title:"Title/Family Name",placeholder:"Family Name",minimum:1,maximum:1,type:"string"}),d("phoneNumbers",{title:"Household Phone Number",minimum:0,maximum:0,type:"string"}),d("emails",{title:"Household Email Address",minimum:0,maximum:0,type:"string"});var i=[],n={title:"Definition",key:"definitions",type:"group",sameLine:!0};n.fields=[{title:"Household Role",key:"householdRole",minimum:0,maximum:1,type:"string",directive:"select",options:[{title:"None",value:""},{title:"Parent",value:"parent"},{title:"Child",value:"child"}]},{title:"Definition",key:"definition",minimum:0,maximum:1,type:"string",directive:"select",options:e.contactDefinitionOptions,expressions:{hide:function(){return!e.contactDefinitions||!e.contactDefinitions.length}}}],i.push(n);var o={title:"Names",key:"names",type:"group",sameLine:!0};o.fields=[{title:"First Name",key:"firstName",minimum:1,maximum:1,type:"string"},{title:"Last Name",key:"lastName",placeholder:e.model.title,minimum:0,maximum:1,type:"string",expressions:{defaultValue:function(){return e.model.title}}}],i.push(o);var s={title:"Bits",key:"bits",type:"group",sameLine:!0,fields:[{title:"Gender",key:"gender",minimum:0,maximum:1,type:"string",directive:"select",options:[{title:"Male",value:"male"},{title:"Female",value:"female"},{title:"Unknown",value:""}]},{title:"Date of Birth",key:"dob",minimum:0,maximum:1,type:"date"}]};i.push(s);var l={title:"Comms",key:"comms",type:"group",sameLine:!0,fields:[{title:"Email Address",key:"emails",minimum:0,maximum:0,type:"email"},{title:"Phone Number",key:"phoneNumbers",minimum:0,maximum:0,type:"string"}]};i.push(l);var a={title:"Comms",key:"comms",type:"group",sameLine:!0,fields:[]};a.fields=[{title:"Realms",description:"If different from the family",key:"realms",minimum:0,maximum:0,type:"reference",directive:"realmselect",params:{restrictType:"realm"},expressions:{defaultValue:function(){return e.model.realms.slice()}}},{title:"Tags",key:"tags",minimum:0,maximum:0,type:"reference",directive:"content-select-button",params:{restrictType:"tag",allDefinitions:!0}}],i.push({title:"School / Academic Calendar",key:"_academic",minimum:0,maximum:1,type:"string",customComponent:h.a,expressions:{hide:"model.householdRole == 'parent'"}}),i.push(a);var r="contact"==e.model._context?0:1;function d(e,i){i.key=e,t.push(i)}return d("items",{title:"contact"==e.model._context?"Additional Family Member":"Family Member",minimum:r,maximum:0,type:"group",asObject:!0,askCount:r,fields:i,expressions:{hide:function(){return"contact"==e.model._context}}}),t},membersLength:function(){return _.get(this.model,"items")?this.model.items.length:0},contactDefinitionOptions:function(){var e=this.contactDefinitions;return e.unshift({name:"None",value:""}),e}},methods:{toggleSamePostal:function(){return this.model.samePostal?this.$set(this.model,"samePostal",!1):this.$set(this.model,"samePostal",!0)},create:function(){var e=this,t={family:e.model,lastName:e.model.title};console.log("Create new contact",t),e.$fluro.global.create("contact",{template:t},!0).then((function(t){e.model.items.push(t)}))}},data:function(){return{}},asyncComputed:{contactDefinitions:{default:[],get:function(){var e=this;return new Promise((function(t,i){return e.$fluro.types.subTypes("contact").catch(i).then(t)})).catch((function(t){return console.log(t),e.$fluro.notify(t),reject(t)}))}}}}),x=(i(1003),Object(m.a)(v,n,[],!1,null,null,null));x.options.__file="src/components/content/edit/panels/family.vue";t.default=x.exports},844:function(e,t,i){"use strict";var n=i(41);t.a={props:{config:{type:Object,required:!0},context:{type:String,default:"new"}},data:function(){return{loading:!1}},mounted:function(){this.$set(this.model,"_type",this.config.type.definitionName)},extends:n.default,components:{FluroContentForm:n.default,FluroContentFormField:function(){return Promise.resolve().then(i.bind(null,60))},FluroPrivacySelect:function(){return i.e(44).then(i.bind(null,845))}},computed:{type:function(){return this.config.type},typeName:function(){return this.type?this.type.definitionName:""},itemID:function(){return this.model._id},definition:function(){return this.config.definition},definedFields:function(){return this.definition&&this.definition.fields&&this.definition.fields.length?this.definition.fields:[]},readableContentType:function(){return this.$fluro.types.readable(this.config.definition?this.config.definition.definitionName:this.config.type.definitionName)},fullBody:function(){return this.definition&&this.definition.data&&this.definition.data.fullBody},hideBody:function(){return this.definition&&this.definition.data&&this.definition.data.hideBody},titleLabel:function(){return"Title"},bodyLabel:function(){return"Body"}},methods:{}}},900:function(e,t,i){var n=i(1002);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,i(6).default)("0cdb43a3",n,!1,{})},901:function(e,t,i){var n=i(1004);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,i(6).default)("4afa34fe",n,!1,{})},940:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.model?i("v-container",{attrs:{fluid:"","grid-list-lg":""}},[i("fluro-content-form",{attrs:{fields:e.fields},scopedSlots:e._u([{key:"form",fn:function(t){var n=t.formFields,o=t.fieldHash,s=t.model,l=t.update,a=t.options;return[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",sm12:""}},[i("fluro-content-form-field",{attrs:{"form-fields":n,options:a,field:o.addressLine1},on:{input:l},model:{value:s,callback:function(e){s=e},expression:"model"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",sm12:""}},[i("fluro-content-form-field",{attrs:{"form-fields":n,options:a,field:o.addressLine2},on:{input:l},model:{value:s,callback:function(e){s=e},expression:"model"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[i("fluro-content-form-field",{attrs:{"form-fields":n,options:a,field:o.suburb},on:{input:l},model:{value:s,callback:function(e){s=e},expression:"model"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[i("fluro-content-form-field",{attrs:{"form-fields":n,options:a,field:o.state},on:{input:l},model:{value:s,callback:function(e){s=e},expression:"model"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[i("fluro-content-form-field",{attrs:{"form-fields":n,options:a,field:o.postalCode},on:{input:l},model:{value:s,callback:function(e){s=e},expression:"model"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[i("fluro-content-form-field",{attrs:{"form-fields":n,options:a,field:o.country},on:{input:l},model:{value:s,callback:function(e){s=e},expression:"model"}})],1)],1)]}}],null,!1,3582871058),model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1):e._e()};n._withStripped=!0;var o=i(41),s=i(60),l={props:{value:{type:Object,default:function(){return{}}}},components:{FluroContentForm:o.default,FluroContentFormField:s.default},data:function(){return{model:this.value,proposed:{}}},methods:{},computed:{fields:function(){var e=[];function t(t,i){i.key=t,e.push(i)}return(t("addressLine1",{title:"Address Line 1",minimum:0,maximum:1,type:"string"}),t("addressLine2",{title:"Address Line 2",minimum:0,maximum:1,type:"string"}),t("suburb",{title:"Suburb",minimum:0,maximum:1,type:"string"}),t("state",{title:"State",minimum:0,maximum:1,type:"string"}),t("postalCode",{title:"Postal Code",minimum:0,maximum:1,type:"string"}),t("country",{title:"Country",minimum:0,maximum:1,type:"string",directive:"countryselect"}),e)}}},a=i(0),r=Object(a.a)(l,n,[],!1,null,null,null);r.options.__file="src/components/content/edit/components/AddressManager.vue";t.a=r.exports}}]);