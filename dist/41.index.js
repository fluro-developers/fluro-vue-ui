(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{1012:function(t,e,i){"use strict";var n=i(871);i.n(n).a},1013:function(t,e,i){(t.exports=i(2)(!1)).push([t.i,".hint[data-v-4b10627e]{font-size:10px;opacity:0.5;color:inherit;display:block}.sidebar[data-v-4b10627e],.main[data-v-4b10627e]{flex:1;overflow:hidden;display:flex;flex-direction:column}.horizontal-rule[data-v-4b10627e]{display:block;border-radius:20px;height:3px;background:rgba(0,0,0,0.1);margin:10px 0}.sidebar[data-v-4b10627e]{background:rgba(0,0,0,0.02)}@media (min-width: 769px){.sidebar[data-v-4b10627e]{border-left:1px solid rgba(0,0,0,0.05)}}.bordered[data-v-4b10627e]{border:1px solid rgba(0,0,0,0.1);box-shadow:0 2px 4px rgba(0,0,0,0.1)}.bordered[data-v-4b10627e] .tabset-menu{background:#eee}\n",""])},763:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("flex-column",[t.loading?[i("fluro-page-preloader",{attrs:{contain:""}})]:i("tabset",{attrs:{justified:!0},scopedSlots:t._u([{key:"menuprefix",fn:function(){return["edit"==t.context&&t.$vuetify.breakpoint.mdAndUp?void 0:t._e()]},proxy:!0}])},[t._v(" "),i("tab",{attrs:{heading:"Card Details"}},[i("flex-row",[i("v-flex",{staticClass:"main",attrs:{xs12:"",sm8:""}},[i("flex-column-body",{staticStyle:{background:"#fafafa"}},[i("v-container",[i("constrain",{attrs:{sm:""}},[t.reference?[i("fluro-panel",[i("fluro-panel-body",{staticStyle:{padding:"0"}},[i("flex-column-body",{staticStyle:{"max-height":"50vh"}},[i("fluro-content-view",{attrs:{id:t.reference,embedded:!0,definition:t.reference.definition,type:t.reference._type}})],1)],1)],1)]:t.definition&&t.definition.fields&&t.definition.fields.length?[i("fluro-content-form-field",{attrs:{"form-fields":t.formFields,outline:t.showOutline,options:t.options,field:t.fieldHash.title},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}}),t._v(" "),i("fluro-content-form",{attrs:{options:t.options,fields:t.definition.fields},model:{value:t.model.data,callback:function(e){t.$set(t.model,"data",e)},expression:"model.data"}})]:[i("h3",{attrs:{margin:""}},[t._v(t._s(t.title))]),t._v(" "),i("fluro-content-form-field",{attrs:{"form-fields":t.formFields,outline:t.showOutline,options:t.options,field:t.referenceItemField},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],t._v(" "),t.model.forms&&t.model.forms.length?[t.receivedForms&&t.receivedForms.length?i("v-input",{staticClass:"no-flex"},[i("v-label",[t._v("Received "+t._s(t.receivedForms.length)+" Form Responses")]),t._v(" "),i("p",{staticClass:"help-block"},[t._v("These forms have not yet been submitted")]),t._v(" "),i("list-group",t._l(t.receivedForms,(function(e,n){return i("list-group-item",{key:n},[i("strong",[i("fluro-icon",{attrs:{type:"form"}}),t._v(" "+t._s(e.form.title)+"\n                                                ")],1),t._v(" "),i("div",{staticClass:"sm"},[i("span",{staticClass:"status-label active"},[i("fluro-icon",{attrs:{icon:"check"}}),t._v(" Received ")],1),t._v(" "+t._s(t._f("formatDate")(e.received,"h:mma ddd MMM YYYY"))+" "),i("span",{staticClass:"muted"},[t._v(t._s(t._f("timeago")(e.received)))])])])})),1)],1):t._e(),t._v(" "),t.awaitingForms&&t.awaitingForms.length?i("v-input",{staticClass:"no-flex"},[i("v-label",[t._v("Awaiting "+t._s(t.awaitingForms.length)+" Form Responses")]),t._v(" "),i("p",{staticClass:"help-block"},[t._v("These forms have not yet been submitted")]),t._v(" "),i("list-group",t._l(t.awaitingForms,(function(e){return i("list-group-item",{scopedSlots:t._u([{key:"right",fn:function(){return[i("v-btn",{attrs:{small:"",color:"primary",loading:t.resending[e.form._id]},on:{click:function(i){return t.resend(e)}}},[t._v("\n                                                        Resend\n                                                        "),i("fluro-icon",{attrs:{right:"",icon:"paper-plane"}})],1)]},proxy:!0}],null,!0)},[i("strong",[i("fluro-icon",{attrs:{type:"form"}}),t._v(" "+t._s(e.form.title)+"\n                                                ")],1),t._v(" "),i("div",{staticClass:"sm"},[t._v("\n                                                    Sent "+t._s(t._f("timeago")(e.sent))+" - "),i("span",{staticClass:"status-label draft"},[i("fluro-icon",{attrs:{icon:"clock"}}),t._v(" Awaiting form response")],1)])])})),1)],1):t._e()]:t._e(),t._v(" "),[t._l(t.model.taskLists,(function(e,n){return i("fluro-task-list",{attrs:{card:t.model,state:t.model.state,definition:t.definition},on:{remove:function(e){return t.removeTaskList(n)},input:t.dispatchUpdate},model:{value:t.model.taskLists[n],callback:function(e){t.$set(t.model.taskLists,n,e)},expression:"model.taskLists[index]"}})})),t._v(" "),i("span",{staticClass:"horizontal-rule"}),t._v(" "),i("v-btn",{staticClass:"ml-0",on:{click:function(e){return t.addTaskList()}}},[t._v("\n                                        Add Task List\n                                        "),i("fluro-icon",{attrs:{right:"",icon:"plus"}})],1)]],2)],1)],1)],1),t._v(" "),i("v-flex",{staticClass:"sidebar",attrs:{xs12:"",sm4:""}},[i("flex-column-body",[i("v-container",[i("fluro-content-form-field",{attrs:{"form-fields":t.formFields,outline:t.showOutline,options:t.options,field:t.fieldHash.dueDate},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}}),t._v(" "),i("fluro-content-form-field",{attrs:{"form-fields":t.formFields,outline:t.showOutline,options:t.options,field:t.fieldHash.state},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}}),t._v(" "),i("v-input",{staticClass:"no-flex"},[i("v-label",[t._v("Key Contacts")]),t._v(" "),i("p",{staticClass:"help-block"},[t._v("This card does not reference a contact, Here you can specify who should be sent Automated SMS and Mailouts as this card progresses")]),t._v(" "),i("fluro-content-form-field",{attrs:{"form-fields":t.formFields,showLabel:!1,outline:t.showOutline,options:t.options,field:t.fieldHash.contacts},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1),t._v(" "),i("v-input",{staticClass:"no-flex"},[i("v-label",[t._v("Assigned To")]),t._v(" "),i("p",{staticClass:"help-block"},[t._v("Assign who is in charge of this card")]),t._v(" "),i("fluro-content-form-field",{attrs:{"form-fields":t.formFields,showLabel:!1,outline:t.showOutline,options:t.options,field:t.fieldHash.assignedTo},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1)],1)],1)],1)],1)],1)],1)],2)};n._withStripped=!0;i(7),i(85),i(138),i(42),i(11),i(54),i(23),i(12);var o=i(5),s=(i(59),i(791)),r=i(327),a=i(336),l=(i(20),i(126));function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var c={props:{},created:function(){this.model.data||(this.model.data={})},mixins:[s.a],components:{FluroContentView:r.a,FluroTaskList:a.a},methods:{removeTaskList:function(t){var e=this.model.taskLists;this.$delete(e,t),this.$set(this.model,"taskLists",e.slice()),this.dispatchUpdate()},addTaskList:function(){this.model.taskLists||this.$set(this.model,"taskLists",[]);var t,e={autofocus:!0,tasks:[]},i=this.currentState;i&&i.title&&(t="".concat(i.title," tasks"),e.state=i.key);var n=_.find(this.model.taskLists,{title:t});t&&t.length&&!n||(t="".concat(this.user.firstName,"'s tasks")),(n=_.find(this.model.taskLists,{title:t}))&&(t="Additional Tasks"),e.title=t,this.model.taskLists.push(e),this.dispatchUpdate()},resend:function(t){var e=this,i=e.$fluro.utils.getStringID(e.model),n=e.$fluro.utils.getStringID(t.form);return e.$set(e.resending,n,!0),e.$fluro.api.put("/process/resend/".concat(i,"/").concat(n)).then((function(t){e.$fluro.notify("Form was resent"),e.$set(e.resending,n,!1)})).catch((function(t){e.$fluro.error(t),e.$set(e.resending,n,!1)}))},dispatchUpdate:function(t){this.update(this.model)}},asyncComputed:{},computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(Object(i),!0).forEach((function(e){Object(o.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},Object(l.mapFields)("fluro",["application","user"]),{fieldsOutput:function(){var t=[];function e(e,i){i.key=e,t.push(i)}return e("title",{title:"Title",minimum:1,maximum:1,type:"string",placeholder:""}),e("contacts",{title:"Key Contacts",minimum:0,maximum:0,type:"reference",params:{restrictType:"contact"}}),e("dueDate",{title:"Due Date",minimum:0,maximum:1,type:"date",directive:"datetime-select",params:{}}),e("state",{title:"Current State",minimum:0,maximum:1,type:"string",directive:"select",options:_.map(this.states,(function(t){return{name:t.title,value:t.key}}))}),e("assignedTo",{title:"Assigned To",minimum:0,maximum:0,type:"reference",params:{restrictType:"contact"}}),t},referenceItemField:function(){var t=this;_.chain(this.definition).get("data.processTypes").map((function(e){return{name:t.$fluro.types.readable(e),value:e}})).value();return{key:"item",title:"Referenced Item",description:"Select an item to add to this process",minimum:0,maximum:1,type:"reference"}},currentStateName:function(){return this.model.state},currentState:function(){return _.find(this.states,{key:this.currentStateName})},reference:function(){return this.model.item},title:function(){if(this.model){if(this.model.title&&this.model.title.length)return this.model.title;if(this.model.item&&this.model.item.title)return this.model.item.title}return"New Card"},states:function(){return _.get(this.definition,"data.states")},awaitingForms:function(){return _.filter(this.model.forms,(function(t){return!t.interaction}))},receivedForms:function(){return _.filter(this.model.forms,(function(t){return t.interaction}))},showOutline:function(){return!1}}),data:function(){return{resending:{}}}},f=(i(1012),i(0)),u=Object(f.a)(c,n,[],!1,null,"4b10627e",null);u.options.__file="src/components/content/edit/panels/process.vue";e.default=u.exports},791:function(t,e,i){"use strict";var n=i(27);e.a={props:{config:{type:Object,required:!0},context:{type:String,default:"new"}},data:function(){return{loading:!1}},mounted:function(){this.$set(this.model,"_type",this.config.type.definitionName)},extends:n.default,components:{FluroContentForm:n.default,FluroContentFormField:function(){return Promise.resolve().then(i.bind(null,39))},FluroPrivacySelect:function(){return i.e(55).then(i.bind(null,792))}},computed:{type:function(){return this.config.type},typeName:function(){return this.type?this.type.definitionName:""},itemID:function(){return this.model._id},definition:function(){return this.config.definition},definedFields:function(){return this.definition&&this.definition.fields&&this.definition.fields.length?this.definition.fields:[]},readableContentType:function(){return this.$fluro.types.readable(this.config.definition?this.config.definition.definitionName:this.config.type.definitionName)},fullBody:function(){return this.definition&&this.definition.data&&this.definition.data.fullBody},hideBody:function(){return this.definition&&this.definition.data&&this.definition.data.hideBody},titleLabel:function(){return"Title"},bodyLabel:function(){return"Body"}},methods:{}}},871:function(t,e,i){var n=i(1013);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(3).default)("050d6df5",n,!1,{})}}]);