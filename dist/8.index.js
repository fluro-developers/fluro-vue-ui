(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{466:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("flex-column",[t.loading?[o("fluro-page-preloader",{attrs:{contain:""}})]:[o("tabset",{attrs:{justified:!0,vertical:!0}},[o("tab",{attrs:{heading:"Details"}},[o("flex-column-body",{staticStyle:{background:"#fafafa"}},[o("v-container",{attrs:{fluid:"","grid-list-lg":""}},[o("constrain",{attrs:{sm:""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:"",sm12:""}},[o("fluro-content-form-field",{attrs:{"form-fields":t.formFields,outline:t.showOutline,options:t.options,field:t.fieldHash.title},on:{input:t.update},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm6:""}},[o("fluro-content-form-field",{attrs:{"form-fields":t.formFields,outline:t.showOutline,options:t.options,field:t.fieldHash.emails},on:{input:t.update},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm6:""}},[o("fluro-content-form-field",{attrs:{"form-fields":t.formFields,outline:t.showOutline,options:t.options,field:t.fieldHash.phoneNumbers},on:{input:t.update},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm12:""}},[o("fluro-panel",[o("fluro-panel-title",[t._v("\n                                            Home Address\n                                        ")]),t._v(" "),o("fluro-panel-body",[o("address-manager",{model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1)],1)],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm12:""}},[o("fluro-privacy-select",{model:{value:t.model.privacy,callback:function(e){t.$set(t.model,"privacy",e)},expression:"model.privacy"}})],1)],1)],1)],1)],1)],1),t._v(" "),o("tab",{attrs:{heading:"Rooms"}},[o("v-container",{attrs:{fluid:"","grid-list-lg":""}},[o("constrain",{attrs:{sm:""}},[o("room-manager",{model:{value:t.model.rooms,callback:function(e){t.$set(t.model,"rooms",e)},expression:"model.rooms"}})],1)],1)],1),t._v(" "),o("tab",{attrs:{heading:"Key Contacts"}},[o("v-container",{attrs:{fluid:"","grid-list-lg":""}},[o("constrain",{attrs:{sm:""}},[o("key-contact-location-manager",{model:{value:t.model.keycontacts,callback:function(e){t.$set(t.model,"keycontacts",e)},expression:"model.keycontacts"}})],1)],1)],1),t._v(" "),o("tab",{attrs:{heading:"Location/Map"},on:{activeTab:t.getLatLong}},[o("v-layout",{attrs:{column:""}},[o("v-flex",[o("location-edit-map-component",{attrs:{name:"locationMap"},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1),t._v(" "),o("v-flex",{attrs:{shrink:""}},[o("v-container",{attrs:{fluid:"","grid-list-lg":""}},[o("constrain",{attrs:{sm:""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:"",sm12:""}},[o("h3",[t._v(t._s(t.title))]),t._v(" "),o("h5",[t._v("Enter the longitude and latitude below or drag the marker to refine the position")])]),t._v(" "),o("v-flex",{staticClass:"mobile-padding",attrs:{xs12:"",sm6:""}},[o("fluro-content-form-field",{attrs:{"form-fields":t.formFields,outline:t.showOutline,options:t.options,field:t.fieldHash.longitude},on:{input:t.update},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1),t._v(" "),o("v-flex",{staticClass:"mobile-padding",attrs:{xs12:"",sm6:""}},[o("fluro-content-form-field",{attrs:{"form-fields":t.formFields,outline:t.showOutline,options:t.options,field:t.fieldHash.latitude},on:{input:t.update},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1)],1)],1)],1)],1)],1)],1),t._v(" "),t.definition&&t.definition.fields&&t.definition.fields.length?o("tab",{attrs:{heading:t.definition.title+" Information"}},[o("fluro-content-form",{attrs:{options:t.options,fields:t.definition.fields},model:{value:t.model.data,callback:function(e){t.$set(t.model,"data",e)},expression:"model.data"}})],1):t._e()],1)]],2)};n._withStripped=!0;var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("list-group",[o("draggable",t._b({attrs:{list:t.model,"ghost-class":"ghost-dragging-class"},on:{start:function(e){t.drag=!0},end:function(e){t.drag=!1}}},"draggable",t.dragOptions,!1),t._l(t.model,(function(e,n){return o("list-group-item",[o("v-layout",{attrs:{"align-center":""}},[o("v-flex",[o("strong",[t._v(t._s(e.title))]),o("br"),t._v(" "),o("span",{staticClass:"muted",staticStyle:{"padding-bottom":"0px"}},[t._v(t._s(e.description))])]),t._v(" "),o("v-flex",{attrs:{shrink:""}},[o("v-btn",{on:{click:function(e){return t.remove(n)}}},[o("fluro-icon",{attrs:{icon:"times"}})],1)],1)],1)],1)})),1)],1),t._v(" "),o("fluro-panel",[o("fluro-panel-title",[t._v("Add a room")]),t._v(" "),o("fluro-panel-body",[o("form",{on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.add()}}},[o("v-layout",[o("v-flex",[o("fluro-content-form",{ref:"form",attrs:{fields:t.fields},model:{value:t.proposed,callback:function(e){t.proposed=e},expression:"proposed"}})],1),t._v(" "),o("v-flex",{attrs:{shrink:""}},[o("v-btn",{attrs:{type:"submit"},on:{click:function(e){return t.add()}}},[t._v("Add")])],1)],1)],1)])],1)],1)};i._withStripped=!0;var a=o(10),l={props:{value:{type:Array}},components:{FluroContentForm:a.default,draggable:()=>Promise.resolve().then(o.t.bind(null,511,7))},data(){return{model:this.value,proposed:{},dragOptions:{},drag:!1}},methods:{add(){var t=JSON.parse(JSON.stringify(this.proposed));t.title&&t.title.length&&(delete t.row,this.model.push(t),this.proposed={})},remove(t){this.model.splice(t,1)}},computed:{fields(){var t,e=[];return(t={type:"group",sameLine:!0,fields:[{title:"Room Name",minimum:1,maximum:1,type:"string",key:"title"},{title:"Description/Directions",minimum:0,maximum:1,type:"string",key:"description"}]}).key="row",e.push(t),e}}},s=(o(709),o(0)),r=Object(s.a)(l,i,[],!1,null,null,null);r.options.__file="src/components/content/edit/components/RoomManager.vue";var d=r.exports,m=function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"map",staticClass:"google-map"})};m._withStripped=!0;var u={name:"google-map",props:{value:{type:Object,required:!0}},data:function(){return{model:this.value,map:null,bounds:null,loading:!0,marker:null}},mounted(){_.get(this.model,"longitude")||(this.model.longitude="144.9616192",this.model.latitude="-37.8150634"),this.initMaps()},computed:{lng(){return parseFloat(this.model.longitude)},lat(){return parseFloat(this.model.latitude)}},methods:{initMaps(){var t=this;t.$fluro.utils.injectScript("https://maps.googleapis.com/maps/api/js?key="+t.$fluro.global.googleMapsAPIKey).then((function(e){var o=t.$refs.map;if(o){t.bounds=new google.maps.LatLngBounds;var n={zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!1,maxZoom:18,scrollwheel:!1,draggable:!0,center:new google.maps.LatLng(t.lat,t.lng)};t.map=new google.maps.Map(o,n),t.initMarkers()}}))},initMarkers(){var t=this,e=new google.maps.LatLng(t.lat,t.lng);t.marker=new google.maps.Marker({position:e,map:t.map,draggable:!0}),t.bounds.extend(e),t.marker.setMap(t.map),t.map.panToBounds(t.bounds),t.loading=!1,google.maps.event.addListener(t.marker,"dragend",(function(e){console.log("DRAG END"),t.model.latitude=e.latLng.lat(),t.model.longitude=e.latLng.lng(),google.maps.event.clearListeners(t.marker,"dragend"),t.markersUpdated()}))},markersUpdated(){var t=this;if(t.marker){console.log("Updating Markers"),t.marker.setMap(null),t.marker=null;var e=new google.maps.LatLng(t.lat,t.lng);t.marker=new google.maps.Marker({position:e,map:t.map,draggable:!0}),t.marker.setMap(t.map),t.bounds=null,t.bounds=new google.maps.LatLngBounds,t.bounds.extend(e),t.map.fitBounds(t.bounds),t.map.panToBounds(t.bounds),google.maps.event.addListener(t.marker,"dragend",(function(e){console.log("DRAG END"),t.model.latitude=e.latLng.lat(),t.model.longitude=e.latLng.lng(),google.maps.event.clearListeners(t.marker,"dragend"),t.markersUpdated()}))}},debouncedUpdate(){return _.debounce(this.markersUpdated,1e3)}},watch:{lat:function(t){if(t)return this.markersUpdated()},lng:function(t){if(t)return this.markersUpdated()}}},p=(o(711),Object(s.a)(u,m,[],!1,null,"39541b5a",null));p.options.__file="src/components/content/edit/components/LocationEditMapComponent.vue";var c=p.exports,f=o(512),g=o(619),v=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("list-group",[o("draggable",t._b({attrs:{list:t.model,"ghost-class":"ghost-dragging-class"},on:{start:function(e){t.drag=!0},end:function(e){t.drag=!1}}},"draggable",t.dragOptions,!1),t._l(t.model,(function(e,n){return o("list-group-item",[o("v-layout",{attrs:{"align-center":""}},[o("v-flex",[o("strong",[t._v(t._s(e.position))])]),t._v(" "),o("v-flex",[o("list-group",{staticStyle:{"margin-bottom":"0px"}},t._l(e.contacts,(function(e){return o("list-group-item",[o("fluro-realm-bar",{attrs:{item:e.realm}}),t._v(" "),o("fluro-avatar",{attrs:{id:e._id,type:"contact",width:100}}),t._v(" "),o("strong",[t._v("\n                                    "+t._s(e.title)+"\n                                ")])],1)})),1)],1),t._v(" "),o("v-flex",{attrs:{shrink:""}},[o("v-btn",{on:{click:function(e){return t.remove(n)}}},[o("fluro-icon",{attrs:{icon:"times"}})],1)],1)],1)],1)})),1)],1),t._v(" "),o("fluro-panel",[o("fluro-panel-title",[t._v("Add a Key Contact")]),t._v(" "),o("fluro-panel-body",[o("form",{on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.add()}}},[o("v-layout",[o("v-flex",[o("fluro-content-form",{ref:"form",attrs:{fields:t.fields},model:{value:t.proposed,callback:function(e){t.proposed=e},expression:"proposed"}})],1),t._v(" "),o("v-flex",{attrs:{shrink:""}},[o("v-btn",{attrs:{type:"submit"},on:{click:function(e){return t.add()}}},[t._v("Add")])],1)],1)],1)])],1)],1)};v._withStripped=!0;var h={props:{value:{type:Array}},components:{draggable:()=>Promise.resolve().then(o.t.bind(null,511,7))},data(){return{model:this.value,proposed:{},dragOptions:{},drag:!1}},methods:{add(){var t=JSON.parse(JSON.stringify(this.proposed));t.position&&t.position.length&&(delete t.row,this.model.push(t),this.proposed={})},remove(t){this.model.splice(t,1)}},computed:{fields(){var t,e=[];return(t={type:"group",sameLine:!0,fields:[{title:"Position/Title",minimum:1,maximum:1,type:"string",key:"position"},{title:"Description/Directions",minimum:0,maximum:0,type:"reference",key:"contacts",params:{restrictType:"contact"}}]}).key="row",e.push(t),e}}},b=(o(713),Object(s.a)(h,v,[],!1,null,null,null));b.options.__file="src/components/content/edit/components/KeyContactLocationManager.vue";var x=b.exports,y=(o(7),{components:{AddressManager:g.a,RoomManager:d,KeyContactLocationManager:x,LocationEditMapComponent:c},created(){},mixins:[f.a],computed:{fieldsOutput(){var t=[];function e(e,o){o.key=e,t.push(o)}return e("title",{title:"Title",placeholder:"Location Name",minimum:1,maximum:1,type:"string"}),e("phoneNumbers",{title:"Phone Numbers",minimum:0,maximum:0,type:"string"}),e("emails",{title:"Emails",minimum:0,maximum:0,type:"string"}),e("longitude",{title:"Longitude",minimum:0,maximum:1,type:"string"}),e("latitude",{title:"Latitude",minimum:0,maximum:1,type:"string"}),t},geocodeAddress(){var t=this.model;return t.addressLine1+", "+t.suburb+", "+t.state+" "+t.postalCode+" "+t.country},title(){return _.get(this.model,"title")||""}},methods:{getLatLong(){var t=this;t.model.longitude||t.model.latitude||t.$fluro.api.axios.get("https://maps.googleapis.com/maps/api/geocode/json",{params:{key:t.$fluro.global.googleMapsAPIKey,address:t.geocodeAddress}}).then((function(e){if(console.log("GOT REQUEST",e),"OK"==e.data.status&&e.data.results&&e.data.results.length){var o=_.get(e.data.results[0],"geometry.location");console.log("VALID REQUEST",o),o&&(t.model.latitude=o.lat,t.model.longitude=o.lng)}}))}},data:()=>({})}),k=(o(715),Object(s.a)(y,n,[],!1,null,null,null));k.options.__file="src/components/content/edit/panels/location.vue";e.default=k.exports},512:function(t,e,o){"use strict";var n=o(10);e.a={props:{config:{type:Object,required:!0},context:{type:String,default:"new"}},data:()=>({loading:!1}),mounted(){this.$set(this.model,"_type",this.config.type.definitionName)},extends:n.default,components:{FluroContentForm:n.default,FluroContentFormField:()=>Promise.resolve().then(o.bind(null,11)),FluroPrivacySelect:()=>o.e(54).then(o.bind(null,513))},computed:{type(){return this.config.type},typeName(){return this.type?this.type.definitionName:""},itemID(){return this.model._id},definition(){return this.config.definition},definedFields(){return this.definition&&this.definition.fields&&this.definition.fields.length?this.definition.fields:[]},readableContentType(){return this.$fluro.types.readable(this.config.definition?this.config.definition.definitionName:this.config.type.definitionName)},fullBody(){return this.definition&&this.definition.data&&this.definition.data.fullBody},hideBody(){return this.definition&&this.definition.data&&this.definition.data.hideBody},titleLabel:()=>"Title",bodyLabel:()=>"Body"},methods:{}}},581:function(t,e,o){var n=o(710);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,o(3).default)("769559b4",n,!1,{})},582:function(t,e,o){var n=o(712);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,o(3).default)("2ce29394",n,!1,{})},583:function(t,e,o){var n=o(714);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,o(3).default)("7a876dd8",n,!1,{})},584:function(t,e,o){var n=o(716);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,o(3).default)("5b54d3ba",n,!1,{})},619:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.model?o("v-container",{attrs:{fluid:"","grid-list-lg":""}},[o("fluro-content-form",{attrs:{fields:t.fields},scopedSlots:t._u([{key:"form",fn:function(e){var n=e.formFields,i=e.fieldHash,a=e.model,l=e.update,s=e.options;return[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:"",sm12:""}},[o("fluro-content-form-field",{attrs:{"form-fields":n,options:s,field:i.addressLine1},on:{input:l},model:{value:a,callback:function(t){a=t},expression:"model"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm12:""}},[o("fluro-content-form-field",{attrs:{"form-fields":n,options:s,field:i.addressLine2},on:{input:l},model:{value:a,callback:function(t){a=t},expression:"model"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[o("fluro-content-form-field",{attrs:{"form-fields":n,options:s,field:i.suburb},on:{input:l},model:{value:a,callback:function(t){a=t},expression:"model"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[o("fluro-content-form-field",{attrs:{"form-fields":n,options:s,field:i.state},on:{input:l},model:{value:a,callback:function(t){a=t},expression:"model"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[o("fluro-content-form-field",{attrs:{"form-fields":n,options:s,field:i.postalCode},on:{input:l},model:{value:a,callback:function(t){a=t},expression:"model"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[o("fluro-content-form-field",{attrs:{"form-fields":n,options:s,field:i.country},on:{input:l},model:{value:a,callback:function(t){a=t},expression:"model"}})],1)],1)]}}],null,!1,3582871058),model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1):t._e()};n._withStripped=!0;var i=o(10),a=o(11),l={props:{value:{type:Object,default:function(){return{}}}},components:{FluroContentForm:i.default,FluroContentFormField:a.default},data(){return{model:this.value,proposed:{}}},methods:{},computed:{fields(){var t=[];function e(e,o){o.key=e,t.push(o)}return e("addressLine1",{title:"Address Line 1",minimum:0,maximum:1,type:"string"}),e("addressLine2",{title:"Address Line 2",minimum:0,maximum:1,type:"string"}),e("suburb",{title:"Suburb",minimum:0,maximum:1,type:"string"}),e("state",{title:"State",minimum:0,maximum:1,type:"string"}),e("postalCode",{title:"Postal Code",minimum:0,maximum:1,type:"string"}),e("country",{title:"Country",minimum:0,maximum:1,type:"string",directive:"countryselect"}),t}}},s=o(0),r=Object(s.a)(l,n,[],!1,null,null,null);r.options.__file="src/components/content/edit/components/AddressManager.vue";e.a=r.exports},709:function(t,e,o){"use strict";var n=o(581);o.n(n).a},710:function(t,e,o){(t.exports=o(2)(!1)).push([t.i,".ghost-dragging-class{opacity:0.5;background:#c8ebfb}\n",""])},711:function(t,e,o){"use strict";var n=o(582);o.n(n).a},712:function(t,e,o){(t.exports=o(2)(!1)).push([t.i,".google-map[data-v-39541b5a]{width:100%;height:100%;background:gray}\n",""])},713:function(t,e,o){"use strict";var n=o(583);o.n(n).a},714:function(t,e,o){(t.exports=o(2)(!1)).push([t.i,".ghost-dragging-class{opacity:0.5;background:#c8ebfb}\n",""])},715:function(t,e,o){"use strict";var n=o(584);o.n(n).a},716:function(t,e,o){(t.exports=o(2)(!1)).push([t.i,".no-border-no-background .toggle-item{border:none !important;background:none !important;font-size:14px;padding:0px}@media only screen and (max-width: 600px){.mobile-padding{padding-top:0px !important;padding-bottom:0px !important}}\n",""])}}]);