(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{473:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("flex-column",[t.loading?[a("fluro-page-preloader",{attrs:{contain:""}})]:a("tabset",{attrs:{justified:!0,vertical:!0}},[a("tab",{attrs:{heading:"Plan"}},[a("div",{staticClass:"plan-table-wrapper"},[a("div",{ref:"container",staticClass:"plan-table"},[a("table",{staticClass:"main-table",attrs:{id:"main-table"}},[a("thead",[a("tr",[a("th",{staticClass:"shrink center"},[a("fluro-icon",{attrs:{icon:"clock"}})],1),t._v(" "),a("th",{staticClass:"detail"},[t._v("Detail")]),t._v(" "),t._l(t.columns,(function(e,l){return a("th",{key:l},[t._v("\n                                    "+t._s(e.title)+"\n                                ")])}))],2)]),t._v(" "),a("tbody",t._l(t.item.schedules,(function(e,l){return a("plan-row",{key:e.guid,attrs:{index:l,plan:t.item},model:{value:t.item.schedules[l],callback:function(e){t.$set(t.item.schedules,l,e)},expression:"item.schedules[index]"}})})),1)])])])]),t._v(" "),t.definition?a("tab",{attrs:{heading:t.definition.title+" details"}},[t._t("default",[a("flex-column-body",{staticStyle:{background:"#fafafa"}},[a("v-container",[a("constrain",{attrs:{sm:""}},[a("h3",{attrs:{margin:""}},[t._v(t._s(t.definition.title))]),t._v(" "),a("fluro-content-render",{attrs:{fields:t.definedFields},model:{value:t.item.data,callback:function(e){t.$set(t.item,"data",e)},expression:"item.data"}})],1)],1)],1)])],2):t._e()],1)],2)};l._withStripped=!0;var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{class:t.type},[a("th",{staticClass:"duration-cell"},[a("div",{staticClass:"cell"},[a("div",[t._v(t._s(t.row.time))]),t._v(" "),a("div",{staticClass:"sm muted"},[a("em",[t._v(t._s(t._f("mins")(t.row.duration)))])])])]),t._v(" "),a("td",[a("v-layout",[a("v-flex",[a("div",{staticClass:"row-title"},[a("div",{staticClass:"cell"},[a("strong",{staticClass:"row-title-text"},[t._v(t._s(t.row.title))])])])]),t._v(" "),"song"==t.type?a("div",[a("div",{staticClass:"row-song-key cell"},[t._v("\n                    "+t._s(t.row.key)+"\n                ")])]):t._e()],1),t._v(" "),"breaker"!=t.type&&"start"!=t.type?a("div",{staticClass:"row-detail"},[t.row.detail?a("div",{staticClass:"cell"}):t._e()]):t._e()],1),t._v(" "),t._l(t.columns,(function(e){return a("td",{key:e.key},[a("div",{staticClass:"cell",domProps:{innerHTML:t._s(t.row.notes[e.key])}})])}))],2)};i._withStripped=!0;a(7);var n={props:{value:{type:Object},index:{type:Number},plan:{type:Object}},data(){return{actionsOpen:!1,row:this.value}},created(){this.row.notes||(this.row.notes={})},computed:{type(){return this.row.type},teams(){return this.plan.teams},columns(){return _.map(this.teams,(function(t){return{title:t,key:t}}))}},filters:{mins(t){if(!t)return"";var e=Math.floor(t/3600),a=Math.floor((t-3600*e)/60),l=t-3600*e-60*a;function i(t){return("0"+t).slice(-2)}return a=a||"",l=l||"",(e=e||"")?`${i(e)}:${i(a)}:${i(l)}`:a&&l?`${a}m ${l}s `:a?a+" mins":l+"s"}}},r=(a(767),a(0)),o=Object(r.a)(n,i,[],!1,null,null,null);o.options.__file="src/components/content/view/components/PlanRow.vue";var s=o.exports,d=a(514),p={props:{config:{type:Object,required:!0},item:{type:Object,required:!0}},components:{PlanRow:s},mixins:[d.a],created(){var t=this;_.each(t.item.schedules,(function(e){t.$set(e,"guid",t.$fluro.utils.guid())})),t.calculateDurations()},methods:{calculateDurations(){var t=this,e=t.startRowIndex;-1==e&&(e=0);var a=_.get(t.item,"event.startDate"),l=_.get(t.item,"startDate"),i=!!a&&new Date(a)||!!l&&new Date(l)||new Date;function n(e){var a=new Date(JSON.parse(JSON.stringify(i)));return e<0?a.setTime(i.getTime()- -1*e):a.setTime(i.getTime()+e),t.$fluro.date.formatDate(a,"h:mma")}var r=t.item.schedules,o=r.slice(0,e).reverse(),s=r.slice(e);_.reduce(o,(function(e,a,l){return a.duration&&(e+=1e3*parseInt(a.duration)),t.$set(a,"time",n(-e)),t.$set(a,"elapsedTime",-e),e}),0),_.reduce(s,(function(e,a,l){return t.$set(a,"time",n(e)),a.duration&&(e+=1e3*parseInt(a.duration)),t.$set(a,"elapsedTime",e),e}),0)}},computed:{times(){return _.map(this.model.schedules,"duration").join("-")},startRow(){return this.model.schedules[this.startRowIndex]},startRowIndex(){return _.findIndex(this.item.schedules,{type:"start"})},teams(){return this.item.teams},columns(){return _.chain(this.teams).compact().map((function(t){return{title:t,key:t}})).value()}},data:()=>({actionsOpen:!1,drag:!1,dragOptions:{}})},b=(a(769),Object(r.a)(p,l,[],!1,null,null,null));b.options.__file="src/components/content/view/panels/plan.vue";e.default=b.exports},514:function(t,e,a){"use strict";var l=a(167),i=a(33),n=a(12);e.a={props:{config:{type:Object,required:!0}},data:()=>({loading:!1}),mixins:[n.a],components:{FluroContentRender:l.default,FluroContentRenderField:i.default},computed:{itemID(){return this.$fluro.utils.getStringID(this.item)},definition(){return this.config&&this.config.definition?this.config.definition:null},data(){return this.item.data||{}},fields(){return this.definition&&this.definition.fields&&this.definition.fields.length?this.definition.fields:[]}},methods:{}}},610:function(t,e,a){var l=a(768);"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);(0,a(3).default)("6e7c7dd9",l,!1,{})},611:function(t,e,a){var l=a(770);"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);(0,a(3).default)("a8b6d3b4",l,!1,{})},767:function(t,e,a){"use strict";var l=a(610);a.n(l).a},768:function(t,e,a){(t.exports=a(2)(!1)).push([t.i,".duration-cell{font-weight:normal}\n",""])},769:function(t,e,a){"use strict";var l=a(611);a.n(l).a},770:function(t,e,a){(t.exports=a(2)(!1)).push([t.i,".plan-table-wrapper{position:relative;flex:1;display:flex;overflow:hidden}.plan-table-wrapper .cog-btn{position:absolute;top:0px;right:0px;width:38px;z-index:3;text-align:center}.plan-table{flex:1;position:relative;width:100%;z-index:1;margin:auto;overflow:auto;background:#f0f2f5;height:100%}.plan-table p{margin-bottom:5px !important}.plan-table mention{font-size:0.8em;font-weight:500;background:rgba(0,0,0,0.1);border-radius:100px;padding:2px 4px;display:inline-block;margin:0 4px}.plan-table .cell{padding:4px 8px;word-wrap:break-word;white-space:pre-wrap}.plan-table .placeholder{padding-bottom:2px;padding-top:2px;opacity:0;font-size:0.8em;font-style:italic}.plan-table .row-song-key{min-width:30px;display:block;text-align-last:center;appearance:none;border:none;outline:none;font-weight:500}.plan-table .row-song-key,.plan-table .row-title{font-size:1.1em}.plan-table .row-song-key .cell,.plan-table .row-title .cell{padding-bottom:0}.plan-table .row-detail .cell{padding-top:0}.plan-table table{width:100%;min-width:600px;margin:auto;border-collapse:separate;border-spacing:0}.plan-table table th,.plan-table table td{text-align:left;padding:5px;border-bottom:1px solid #e8edf1;border-right:1px solid #e8edf1;height:inherit;white-space:nowrap}.plan-table table tr{height:1px;background:#fff}.plan-table table tr .dragger{opacity:0}.plan-table table tr:hover .placeholder{opacity:0.5}.plan-table table tr:hover .dragger{opacity:0.5}.plan-table table tr th:first-child,.plan-table table tr th:last-child{background:#fff}.plan-table table tr:nth-child(odd){background:#fcfcfc}.plan-table table tr:nth-child(odd) th:first-child,.plan-table table tr:nth-child(odd) th:last-child{background:#fcfcfc}.plan-table table tr.song{background:#fffbdd;color:#6b5f31}.plan-table table tr.song th:first-child,.plan-table table tr.song th:last-child{background:#fffbdd}.plan-table table tr.breaker{background:#f0f2f5}.plan-table table tr.breaker th,.plan-table table tr.breaker td{border-right:none;border-top:1px solid #e8edf1;border-bottom:1px solid #e8edf1}.plan-table table tr.breaker th .cell,.plan-table table tr.breaker td .cell{padding:15px}.plan-table table tr.breaker th.row-title .cell,.plan-table table tr.breaker td.row-title .cell{padding-top:inherit}.plan-table table tr.breaker th:first-child,.plan-table table tr.breaker th:last-child{background:#f0f2f5}.plan-table table tr.breaker .row-title-text{opacity:0.7;text-transform:uppercase;font-weight:600;letter-spacing:0.05em;font-size:0.8em}.plan-table table tr.start{background:#93d3c8}.plan-table table tr.start th,.plan-table table tr.start td{border-right:none;border-top:1px solid #e8edf1;border-bottom:1px solid #e8edf1}.plan-table table tr.start th .cell,.plan-table table tr.start td .cell{padding:5px}.plan-table table tr.start th.row-title .cell,.plan-table table tr.start td.row-title .cell{padding-top:inherit}.plan-table table tr.start th:first-child,.plan-table table tr.start th:last-child{background:#93d3c8}.plan-table table tr.start .row-title-text{opacity:0.7;text-transform:uppercase;font-weight:600;letter-spacing:0.05em;font-size:0.8em}.plan-table table td{vertical-align:top;padding:0;position:relative}.plan-table table td.duration-cell{text-align:center}.plan-table table td:hover{background:rgba(0,0,255,0.05)}.plan-table table td p:last-child,.plan-table table td .fluro-editor{margin-bottom:0 !important}.plan-table table td .fluro-inline-edit{min-height:100%;min-width:100%;display:block;width:100%;position:relative;float:left}.plan-table table td .fluro-inline-edit{width:100%;height:100%;display:block}.plan-table table td .fluro-inline-edit .inline-edit-default{height:auto !important;width:auto !important}.plan-table table td .fluro-inline-edit .inline-edit-input{background:#fff;position:absolute;left:0;top:0;right:0}.plan-table table td .fluro-inline-edit .inline-edit-input.inline-show{border-radius:3px;border:3px solid blue;box-shadow:0 4px 10px rgba(0,0,0,0.3);z-index:3}.plan-table table td .fluro-inline-edit input,.plan-table table td .fluro-inline-edit select{margin:0;max-width:100%;width:100%;display:block;padding:4px 8px;line-height:1}.plan-table table thead th{background:#fff;font-size:0.8em;position:-webkit-sticky;position:sticky;top:0;z-index:3;border-bottom:3px solid rgba(0,0,0,0.1)}.plan-table table thead th.center{text-align:center}.plan-table table thead th.shrink{width:1px}.plan-table table thead th.detail{max-width:300px}.plan-table table tfoot th,.plan-table table tfoot td{position:-webkit-sticky;position:sticky;bottom:0;z-index:4;background:#f0f2f5 !important;border:none !important;border-top:1px solid rgba(0,0,0,0.1) !important}.plan-table table th:first-child,.plan-table table th:last-child{position:-webkit-sticky;position:sticky;z-index:2;vertical-align:center !important;text-align:center}.plan-table table th:first-child:first-child,.plan-table table th:last-child:first-child{left:0;width:1px;border-right:1px solid #e8edf1}.plan-table table th:first-child:last-child,.plan-table table th:last-child:last-child{right:0;width:1px;border-left:1px solid #e8edf1}.plan-table table thead th:first-child,.plan-table table thead th:last-child,.plan-table table tfoot th:first-child,.plan-table table tfoot th:last-child{z-index:5}.plan-table table tr.sortable-ghost{opacity:0.3}.plan-table table tr.sortable-ghost th,.plan-table table tr.sortable-ghost td{border-color:greyscale(#89a3b7, 1%) !important;background:greyscale(#89a3b7, 1%) !important}.plan-table table td .fluro-editor-textarea{min-height:0}.plan-table table td .fluro-editor-textarea>div{border-radius:0 !important;padding:4px 8px !important;border:none !important}\n",""])}}]);