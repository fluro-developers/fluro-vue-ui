(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{489:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("flex-column",[t.loading?[i("fluro-page-preloader",{attrs:{contain:""}})]:[i("tabset",{attrs:{justified:!0,vertical:!0}},[i("tab",{attrs:{heading:"Pass Settings"}},[i("flex-column-body",{staticStyle:{background:"#fafafa"}},[i("v-container",[i("constrain",{attrs:{sm:""}},[i("fluro-content-form-field",{attrs:{"form-fields":t.formFields,outline:t.showOutline,options:t.options,field:t.fieldHash.title},on:{input:t.update},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}}),t._v(" "),i("fluro-content-form-field",{attrs:{"form-fields":t.formFields,outline:t.showOutline,options:t.options,field:t.fieldHash.description},on:{input:t.update},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}}),t._v(" "),i("fluro-panel",[i("fluro-panel-title",[i("fluro-content-form-field",{attrs:{"form-fields":t.formFields,outline:t.showOutline,options:t.options,field:t.fieldHash.inviteCodeEnabled},on:{input:t.update},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1),t._v(" "),t.model.inviteCodeEnabled?[i("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"invite-code",attrs:{content:"Click to copy to clipboard"},on:{click:t.copyCodeToClipboard}},[i("span",[t._v(t._s(t.inviteCode))])]),t._v(" "),i("input",{ref:"input",attrs:{type:"hidden"},domProps:{value:t.inviteCode}})]:t._e()],2),t._v(" "),i("fluro-permission-select",{model:{value:t.model.sets,callback:function(e){t.$set(t.model,"sets",e)},expression:"model.sets"}})],1)],1)],1)],1),t._v(" "),t.definition?i("tab",{attrs:{heading:t.definition.title+" Fields"}},[i("flex-column-body",{staticStyle:{background:"#fafafa"}},[i("v-container",[i("constrain",{attrs:{sm:""}},[i("h3",{attrs:{margin:""}},[t._v(t._s(t.definition.title)+" Fields")]),t._v(" "),i("fluro-content-form",{attrs:{options:t.options,fields:t.definition.fields},model:{value:t.model.data,callback:function(e){t.$set(t.model,"data",e)},expression:"model.data"}})],1)],1)],1)],1):t._e()],1)]],2)};s._withStripped=!0;var o=i(512),n=i(529),l=(i(7),{components:{FluroPermissionSelect:n.a},mixins:[o.a],methods:{copyCodeToClipboard(){let t=this.$refs.input;t.setAttribute("type","text"),t.select();try{document.execCommand("copy");this.$fluro.notify("Invite Code Copied to clipboard")}catch(t){}t.setAttribute("type","hidden"),window.getSelection().removeAllRanges()},toggleExpand(t){this.$set(this.expandedSettings,"_"+t,!this.expandedSettings["_"+t]),console.log("TOGGLE",t,this.expandedSettings)}},computed:{policyCode(){return _.get(this.model,"privateDetails.inviteCode")},inviteCode(){return`${this.user.account.prefix}-${this.policyCode}`.toUpperCase()},expanded(){return{contacts:this.expandedSettings._contacts||this.model.contacts&&this.model.contacts.length,teams:this.expandedSettings._teams||this.model.teams&&this.model.teams.length,tickets:this.expandedSettings._tickets||this.model.tickets&&this.model.tickets.length,events:this.expandedSettings._events||this.model.events&&this.model.events.length,interactions:this.expandedSettings._interactions||this.model.interactions&&this.model.interactions.length,cards:this.expandedSettings._cards||this.model.cards&&this.model.cards.length,checkins:this.expandedSettings._checkins||this.model.checkins&&this.model.checkins.length,details:this.expandedSettings._details||this.model.details&&this.model.details.length,families:this.expandedSettings._families||this.model.families&&this.model.families.length,personas:this.expandedSettings._personas||this.model.personas&&this.model.personas.length,collections:this.expandedSettings._collections||this.model.collections&&this.model.collections.length,tags:this.expandedSettings._tags||this.model.tags&&this.model.tags.length,realms:this.expandedSettings._realms||this.model.realms&&this.model.realms.length,definitions:this.expandedSettings._definitions||this.model.definitions&&this.model.definitions.length,query:this.expandedSettings._query||this.model.query}},mailoutType(){return this.model.mailoutType},user(){return this.$fluro.auth.getCurrentUser()},fieldsOutput(){var t=[];function e(e,i){i.key=e,t.push(i)}return e("title",{title:"Title",minimum:1,maximum:1,type:"string",placeholder:"Eg. 'Standard Access'"}),e("description",{title:"Description",description:"Enter a one line description summarizing what permissions this access pass will grant",minimum:0,maximum:1,type:"string",placeholder:"Eg. 'This pass allows a user to access all contacts and teams in the X Realm'"}),e("inviteCodeEnabled",{title:"Enable Invite Code",description:"Enable an invitation code that you can share with people so they can quickly acquire this access pass.",minimum:0,maximum:1,type:"boolean"}),t}},data:()=>({editorOptions:{}})}),a=(i(727),i(0)),d=Object(a.a)(l,s,[],!1,null,null,null);d.options.__file="src/components/content/edit/panels/policy.vue";e.default=d.exports},512:function(t,e,i){"use strict";var s=i(10);e.a={props:{config:{type:Object,required:!0},context:{type:String,default:"new"}},data:()=>({loading:!1}),mounted(){this.$set(this.model,"_type",this.config.type.definitionName)},extends:s.default,components:{FluroContentForm:s.default,FluroContentFormField:()=>Promise.resolve().then(i.bind(null,11)),FluroPrivacySelect:()=>i.e(54).then(i.bind(null,513))},computed:{type(){return this.config.type},typeName(){return this.type?this.type.definitionName:""},itemID(){return this.model._id},definition(){return this.config.definition},definedFields(){return this.definition&&this.definition.fields&&this.definition.fields.length?this.definition.fields:[]},readableContentType(){return this.$fluro.types.readable(this.config.definition?this.config.definition.definitionName:this.config.type.definitionName)},fullBody(){return this.definition&&this.definition.data&&this.definition.data.fullBody},hideBody(){return this.definition&&this.definition.data&&this.definition.data.hideBody},titleLabel:()=>"Title",bodyLabel:()=>"Body"},methods:{}}},516:function(t,e,i){var s=i(526);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,i(3).default)("cf897b64",s,!1,{})},525:function(t,e,i){"use strict";var s=i(516);i.n(s).a},526:function(t,e,i){(t.exports=i(2)(!1)).push([t.i,".table[data-v-20ec38c8]{background:#fff;width:100%;border-collapse:collapse;padding:0;margin:0;border:1px solid rgba(0,0,0,0.1);box-shadow:0 1px 1px rgba(0,0,0,0.1);margin-bottom:25px}.table thead[data-v-20ec38c8]{text-transform:uppercase;letter-spacing:0.03em;font-weight:500;font-size:12px}.table th[data-v-20ec38c8],.table td[data-v-20ec38c8]{padding:10px;text-align:left;border-bottom:1px solid rgba(0,0,0,0.1);vertical-align:middle}.table th.column[data-v-20ec38c8],.table td.column[data-v-20ec38c8]{width:50%}.table th[data-v-20ec38c8]{background:rgba(0,0,0,0.05)}\n",""])},529:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"permission-select"},[t.model.length?[i("table",{staticClass:"table"},[t._m(0),t._v(" "),i("tbody",t._l(t.model,(function(e){return i("tr",[i("td",t._l(e.roles,(function(e){return i("div",[i("fluro-icon",{attrs:{type:"role",left:""}}),t._v(" "),i("strong",[t._v(t._s(e.title))])],1)})),0),t._v(" "),i("td",t._l(e.realms,(function(e){return i("div",[i("fluro-icon",{style:{color:e.bgColor},attrs:{icon:"circle",library:"fas"}}),t._v(" "+t._s(e.title)+"\n                        ")],1)})),0),t._v(" "),i("td",{staticClass:"text-xs-right"},[i("v-btn",{staticClass:"ma-0",attrs:{small:"",icon:""},on:{click:function(i){return t.remove(e)}}},[i("fluro-icon",{attrs:{icon:"times"}})],1)],1)])})),0)])]:t._e(),t._v(" "),i("fluro-card",[i("fluro-card-title",{staticClass:"border-bottom"},[i("h5",[t._v("Add permissions")]),t._v(" "),i("p",{staticClass:"help-block"},[t._v("\n                Select a combination of roles and realms then click add to grant permissions.\n            ")])]),t._v(" "),i("fluro-card-body",[i("v-container",{staticClass:"grid-list-md",attrs:{"pa-0":""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",md4:""}},[i("v-input",{staticClass:"no-flex"},[i("v-label",[t._v("Select a Role")]),t._v(" "),i("p",{staticClass:"help-block"},[t._v("Select a role")]),t._v(" "),i("fluro-content-select-button",{attrs:{block:"",type:"role",allDefinitions:!0,searchInheritable:!0},model:{value:t.proposed.roles,callback:function(e){t.$set(t.proposed,"roles",e)},expression:"proposed.roles"}})],1)],1),t._v(" "),i("v-flex",{attrs:{xs12:"",md5:""}},[i("v-input",{staticClass:"no-flex"},[i("v-label",[t._v("Select a Realm")]),t._v(" "),i("p",{staticClass:"help-block"},[t._v("Select where this role can be used")]),t._v(" "),i("fluro-realm-select",{attrs:{block:""},model:{value:t.proposed.realms,callback:function(e){t.$set(t.proposed,"realms",e)},expression:"proposed.realms"}})],1)],1),t._v(" "),i("v-flex",{attrs:{xs12:"",md3:""}},[i("v-input",{staticClass:"no-flex"},[t.$vuetify.breakpoint.mdAndUp?[i("v-label",[t._v(" ")]),t._v(" "),i("p",{staticClass:"help-block"},[t._v(" ")])]:t._e(),t._v(" "),i("v-btn",{staticClass:"ma-0",attrs:{disabled:!t.valid,block:"",color:"primary"},on:{click:t.add}},[t._v("\n                            Add\n                            "),i("fluro-icon",{attrs:{right:"",icon:"plus"}})],1)],2)],1)],1)],1)],1)],1)],2)};s._withStripped=!0;i(7);var o=i(19),n=i(17),l={components:{FluroRealmSelect:o.default,FluroContentSelectButton:n.default},mixins:[],props:{value:{type:Array,default:function(){return[]}}},data(){return{model:JSON.parse(JSON.stringify(this.value)),loading:!0,proposed:{roles:[],realms:[]}}},computed:{valid(){if(this.proposed.roles&&this.proposed.roles.length&&this.proposed.realms&&this.proposed.realms.length)return!0}},asyncComputed:{},watch:{value:function(t){this.model=t},model:function(){this.$emit("input",this.model)}},methods:{add(){console.log("ADD");var t=JSON.parse(JSON.stringify(this.proposed));this.model.push(t),this.proposed={realms:[],roles:[]}},remove(t){var e=this.model.indexOf(t);this.model.splice(e,1)}}},a=(i(525),i(0)),d=Object(a.a)(l,s,[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{staticClass:"column"},[this._v("Role")]),this._v(" "),e("th",{staticClass:"column"},[this._v("Realms")]),this._v(" "),e("th",[this._v(" ")])])])}],!1,null,"20ec38c8",null);d.options.__file="src/components/form/FluroPermissionSelect.vue";e.a=d.exports},590:function(t,e,i){var s=i(728);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,i(3).default)("3ab0ac9d",s,!1,{})},727:function(t,e,i){"use strict";var s=i(590);i.n(s).a},728:function(t,e,i){(t.exports=i(2)(!1)).push([t.i,".invite-code{line-height:60px;height:60px;padding:0 5px;border:1px solid rgba(0,0,255,0.5);background:rgba(0,0,255,0.1);text-align:center;font-weight:100;font-size:40px}\n",""])}}]);