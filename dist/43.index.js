(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{494:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("flex-column",[t.loading?[i("fluro-page-preloader",{attrs:{contain:""}})]:i("tabset",{attrs:{justified:!0,vertical:!0}},[i("tab",{attrs:{heading:"Roster"}},[i("flex-column-body",{staticStyle:{background:"#fafafa"}})],1),t._v(" "),t.definition&&t.definition.fields&&t.definition.fields.length?i("tab",{attrs:{heading:t.definition.title+" Information"}},[i("flex-column-body",{staticStyle:{background:"#fafafa"}},[i("v-container",[i("constrain",{attrs:{sm:""}},[i("fluro-content-form",{attrs:{options:t.options,fields:t.definition.fields},model:{value:t.model.data,callback:function(e){t.$set(t.model,"data",e)},expression:"model.data"}})],1)],1)],1)],1):t._e()],1)],2)};n._withStripped=!0;var o=i(622),s=i(512),a=(i(7),{mixins:[s.a],components:{ReminderEventManager:o.a,RosterMain:RosterMain},methods:{modelUpdated(){this.update(this.model)},injectAssignment(t,e){var i=this,n=(i.model._id,String(e.title).toLowerCase()),o=_.find(t.slots,(function(t){return t.title.toLowerCase()==n}));if(o)return i.$set(e,"sending",!0),o.assignments.push(e),new Promise((function(n,s){return i.createAssignment(t,o.assignments,e,!0).then((function(t){_.assign(e,t),i.$set(e,"sending",!1),i.$set(t,"sending",!1),console.log("CREATED AND UPDATED ASSIGNMENT",t),n(t)})).catch((function(t){var i=o.assignments.indexOf(e);o.assignments.splice(i,1),n(null)}))}))},createAssignment(t,e,i,n){var o=this;return t=o.model._id,new Promise((function(s,a){var r=i.contact;function d(t){var i=t.data;(i.contactName=i.contact.title||i.contact.firstName+" "+i.contact.lastName,n)||(_.some(e,{_id:i._id})||e.push(i));s(i)}o.$fluro.api.post("/assignments/roster/"+t,i).then(d).catch((function e(n){var s=(n=n.response.data).error,l=n.message;403==n.status&&(l="You do not have permission to make this action.");if("AssignmentConflictError"==s){var f=[{title:`Add ${r.firstName} as '${i.title}' anyway`,description:(r.firstName||"this person")+" can still fulfill this assignment",force:!0}];return o.$fluro.options(f,"Conflict!",l).then((function(n){i.force=n.force,o.$fluro.api.post("/assignments/roster/"+t,i).then(d).catch(e)})).catch((function(t){a(t)}))}o.$fluro.error(n),a(n)}))}))}},created(){},asyncComputed:{},computed:{showOutline:()=>!1,fieldsOutput(){var t,e=[];return(t={title:"Event",minimum:1,maximum:1,type:"reference",params:{restrictType:"event"}}).key="event",e.push(t),e}},data:()=>({})}),r=(i(743),i(0)),d=Object(r.a)(a,n,[],!1,null,"c9b37068",null);d.options.__file="src/components/content/edit/panels/roster.vue";e.default=d.exports},512:function(t,e,i){"use strict";var n=i(10);e.a={props:{config:{type:Object,required:!0},context:{type:String,default:"new"}},data:()=>({loading:!1}),mounted(){this.$set(this.model,"_type",this.config.type.definitionName)},extends:n.default,components:{FluroContentForm:n.default,FluroContentFormField:()=>Promise.resolve().then(i.bind(null,11)),FluroPrivacySelect:()=>i.e(54).then(i.bind(null,513))},computed:{type(){return this.config.type},typeName(){return this.type?this.type.definitionName:""},itemID(){return this.model._id},definition(){return this.config.definition},definedFields(){return this.definition&&this.definition.fields&&this.definition.fields.length?this.definition.fields:[]},readableContentType(){return this.$fluro.types.readable(this.config.definition?this.config.definition.definitionName:this.config.type.definitionName)},fullBody(){return this.definition&&this.definition.data&&this.definition.data.fullBody},hideBody(){return this.definition&&this.definition.data&&this.definition.data.hideBody},titleLabel:()=>"Title",bodyLabel:()=>"Body"},methods:{}}},598:function(t,e,i){var n=i(744);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(3).default)("16fdfa1c",n,!1,{})},743:function(t,e,i){"use strict";var n=i(598);i.n(n).a},744:function(t,e,i){(t.exports=i(2)(!1)).push([t.i,".hint[data-v-c9b37068]{font-size:10px;opacity:0.5;color:inherit;display:block}\n",""])}}]);