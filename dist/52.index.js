(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{531:function(e,t,i){var s=i(626);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,i(3).default)("5ee6e344",s,!1,{})},625:function(e,t,i){"use strict";var s=i(531);i.n(s).a},626:function(e,t,i){(e.exports=i(2)(!1)).push([e.i,".field-editor-children{margin:0;list-style-type:none;padding:0;display:block}.field-editor-children .field-editor-children{padding:3px 3px 3px 20px;background:#eee}.field-editor-item{border:1px solid rgba(0,0,0,0.1);border-radius:3px;overflow:hidden;margin:0 0 4px;list-style-type:none;list-style:none}.field-editor-item .summary{font-size:0.8em;font-weight:normal;opacity:0.5}.field-editor-item .issue-summary{clear:both;font-size:0.8em;font-weight:normal;color:#fff;background:red;border-radius:4px;padding:5px}.field-editor-item.expressions{border:1px dashed #f0974e}.field-editor-item.issues,.field-editor-item.issues>.field-editor-item-field,.field-editor-item.issues>.field-editor-children{background:rgba(255,0,0,0.5) !important;border:1px solid red}.field-editor-item.ghost{border:1px dashed rgba(0,0,0,0.1);opacity:0.5}.field-editor-item:hover{border-color:blue}.field-editor-item .field-editor-item-field{position:relative;padding:5px;background:#fff;font-weight:500;cursor:pointer}.field-editor-item .field-editor-item-field .grab{cursor:grab;opacity:0}.field-editor-item .field-editor-item-field .grab svg{opacity:0.5}.field-editor-item .field-editor-item-field .actions{opacity:0.3;cursor:pointer}.field-editor-item .field-editor-item-field .actions.active{opacity:0.5}.field-editor-item .field-editor-item-field:hover .grab,.field-editor-item .field-editor-item-field:hover .actions{opacity:1}.field-editor-item.office-use-only .field-editor-item-field{background:#eee;color:#888}.field-editor-item.void{border:1px solid transparent}.field-editor-item.void .field-editor-item-field{background:none;color:#888;border:none}.field-editor-item.active{border:1px solid blue}.field-editor-item.active>.field-editor-item-field{background:blue;color:#fff}.field-editor-item .symbol{width:15px;height:20px;line-height:20px;margin-right:2px;font-size:10px}.field-editor-item .symbol.expression{color:#f0974e}.field-editor-item .icon{width:20px;height:20px;line-height:20px;border-radius:100%;text-align:center;margin-right:2px;font-size:12px}.field-editor-item .icon.ticket{color:green}\n",""])},777:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{staticClass:"field-editor-item",class:e.classes},[i("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"field-editor-item-field",attrs:{content:e.fieldPath},on:{click:function(t){return e.select(e.model)},mouseover:function(t){return e.mouseover(e.model)},mouseleave:function(t){return e.mouseleave(e.model)}}},[e.targetRealms?i("fluro-realm-bar",{attrs:{realm:e.targetRealms}}):e._e(),e._v(" "),i("v-layout",{attrs:{"align-center":""}},[i("v-flex",{staticClass:"handle grab",attrs:{shrink:""}},[i("div",{staticClass:"icon"},[i("fluro-icon",{attrs:{icon:"arrows"}})],1)]),e._v(" "),e.ticketed?i("v-flex",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{shrink:"",content:"Ticketing Enabled"}},[i("div",{staticClass:"icon ticket"},[i("fluro-icon",{attrs:{library:"fas",icon:"ticket"}})],1)]):e._e(),e._v(" "),e.hasExpressions?i("v-flex",{attrs:{shrink:""}},[i("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"symbol expression",attrs:{content:"Has Expressions"}},[i("fluro-icon",{attrs:{icon:"brackets-curly"}})],1)]):e._e(),e._v(" "),e.officeUseOnly?i("v-flex",{attrs:{shrink:""}},[i("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"symbol",attrs:{content:"Office Use Only"}},[i("fluro-icon",{attrs:{icon:"eye-slash"}})],1)]):e._e(),e._v(" "),i("v-flex",{staticClass:"handle"},[e._v("\n                "+e._s(e.model.title)+" "),e.summary?i("span",{staticClass:"summary"},[e._v(e._s(e.summary))]):e._e(),e._v(" "),e.readableIssues?i("div",{staticClass:"issue-summary"},[i("fluro-icon",{attrs:{library:"fas",icon:"exclamation"}}),e._v(" "+e._s(e.readableIssues))],1):e._e()]),e._v(" "),e.hasSubFields?i("v-flex",{attrs:{shrink:""},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.toggleCollapsed()}}},[i("fluro-icon",{attrs:{icon:e.model.collapsed?"angle-up":"angle-down"}})],1):e._e(),e._v(" "),i("v-flex",{attrs:{shrink:""},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[i("div",{staticClass:"actions",class:{active:e.showActions}},[i("v-menu",{attrs:{fixed:!0,transition:"slide-y-transition","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[i("span",e._g({},s),[i("fluro-icon",{attrs:{icon:e.showActions?"times":"ellipsis-v"}})],1)]}}]),model:{value:e.showActions,callback:function(t){e.showActions=t},expression:"showActions"}},[e._v(" "),i("div",{staticClass:"text-left"},[i("v-list",{attrs:{dense:""}},e._l(e.availableActions,(function(t){return i("v-list-tile",{on:{click:function(e){return t.click()}}},[i("fluro-icon",{attrs:{icon:t.icon,left:""}}),e._v(e._s(t.title)+"\n                                ")],1)})),1)],1)])],1)])],1)],1),e._v(" "),e.hasSubFields?[e.showSubFields?i("draggable",{staticClass:"field-editor-children",attrs:{handle:".handle",element:"ul",options:e.treeOptions,move:e.onPageMove},model:{value:e.model.fields,callback:function(t){e.$set(e.model,"fields",t)},expression:"model.fields"}},e._l(e.model.fields,(function(t,s){return i("fluro-field-editor-item",{key:t.guid,attrs:{selected:e.selected,parent:e.model.fields,leaf:e.model.fields[s],select:e.select,mouseover:e.mouseover,mouseleave:e.mouseleave},on:{duplicate:e.duplicate,injected:e.injected,deleted:e.deleted}})})),1):e._e()]:e._e()],2)};s._withStripped=!0;var o={components:{draggable:()=>Promise.resolve().then(i.t.bind(null,511,7))},props:{parent:{type:Array,required:!0},leaf:{type:Object,required:!0},select:{type:Function},mouseover:{type:Function},mouseleave:{type:Function},selected:{type:Object}},beforeCreate:function(){this.$options.components.FluroFieldEditorItem=i(777).default},data(){return{showActions:!1,treeOptions:{animation:1,group:"fields",ghostClass:"ghost"},model:this.leaf}},computed:{fieldPath(){return this.model.key},ticketed(){return this.model&&this.model.params&&this.model.params.ticketing&&this.model.params.ticketing.enabled},readableIssues(){if(this.issues.length)return this.issues.join(", ")},issues(){var e=this,t=[];return e.model.title?(e.model.key||t.push("This field does not have a key"),e.parent.some((function(t){if(t!=e.model)return t.key==e.model.key}))&&t.push(`Key '${e.model.key}' is already in use`),t):(t.push("This field does not have a title"),t)},targetRealms(){return this.model.params?this.model.params.targetRealms:null},summary(){var e=1!=this.model.maximum;if(this.model.params||(this.model.params={}),"embedded"==this.model.directive){if(this.model.params.targetHouseholdRole)return`${e?"Multiple ":""}${_.startCase(this.model.params.targetHouseholdRole)}`;if(this.model.params.restrictType)return`${e?"Multiple ":""}${this.$fluro.types.readable(this.model.params.restrictType,e)}`}var t=this.model.type;switch(t){case"void":case"value":return""}return""+_.startCase(t)},showSubFields(){return this.hasSubFields&&this.expanded},expanded(){return!this.collapsed},collapsed(){return this.model.collapsed},hasSubFields(){return"group"==this.model.type||"embedded"==this.model.directive},availableActions(){var e=this,t="group"==e.model.type?"Group":"Field",i=[{title:"Duplicate "+t,icon:"copy",click(){e.$emit("duplicate",e.model,e.parent)}}];return"group"!=t&&"embedded"!=e.model.directive||i.push({title:"Add Field Inside",icon:"plus",click(){e.$emit("injected",e.model,e.model)}}),i.push({title:"Add Field After",icon:"plus",click(){e.$emit("injected",e.model,e.parent)}}),i.push({title:"Delete "+t,icon:"trash-alt",click(){e.$emit("deleted",e.model,e.parent)}}),i},isSelected(){return this.selected==this.model},officeUseOnly(){return this.model.params&&this.model.params.disableWebform},hasExpressions(){return _.get(this.model,"hideExpression.length")||_.get(this.model,"expressions.value")||_.get(this.model,"expressions.defaultValue")||_.get(this.model,"expressions.hide")||_.get(this.model,"expressions.required")},classes(){var e=[];return this.issues.length&&e.push("issues"),this.isSelected&&e.push("active"),this.hasExpressions&&e.push("expressions"),"void"==this.model.type&&e.push("void"),this.officeUseOnly&&e.push("office-use-only"),e}},watch:{hasSubFields(e){e&&!this.model.fields&&this.$set(this.model,"fields",[])}},mounted(){var e=this;e.model.isNew&&(console.log("SCROLL ITEM INTO VIEW"),e.$nextTick((function(){e.$nextTick((function(){e.$el&&e.$el.scrollIntoView&&(e.$el.scrollIntoView({behavior:"smooth"}),e.model.isNew=void 0)}))})))},methods:{toggleCollapsed(){this.$set(this.model,"collapsed",!this.model.collapsed)},duplicate(e,t){this.$emit("duplicate",e,t)},injected(e,t){this.$emit("injected",e,t)},deleted(e,t){this.$emit("deleted",e,t)},clicked(e,t){console.log("EVENT",t.title),this.$emit("click",e,t)},onPageMove({relatedContext:e,draggedContext:t}){const i=e.element,s=t.element;return!(i&&i.fixed||s.fixed)}}},l=(i(625),i(0)),r=Object(l.a)(o,s,[],!1,null,null,null);r.options.__file="src/components/fields/FluroFieldEditorItem.vue";t.default=r.exports}}]);